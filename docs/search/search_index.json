{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"wiki.morifuku.net","text":"<p>\u672cwiki\u3067\u306f\u3001\u3053\u308c\u307e\u3067\u306b\u3001\u500b\u4eba\u7684\u306b\u8abf\u67fb\u30fb\u691c\u8a3c\u3057\u3066\u304d\u305f\u3001\u5404\u7a2e\u6280\u8853\u60c5\u5831\u30fbTIPS\u306a\u3069\u3092\u3001\u516c\u958b\u3057\u3066\u3044\u304d\u307e\u3059\u3002</p> <p>\u672cwiki\u306f\u60c5\u5831\u63d0\u4f9b\u306e\u307f\u3092\u76ee\u7684\u3068\u3057\u3066\u304a\u308a\u3001\u8a18\u8ff0\u5185\u5bb9\u306e\u904b\u7528\u7d50\u679c\u306b\u3064\u3044\u3066\u8457\u8005\u306f\u4e00\u5207\u306e\u8cac\u4efb\u3092\u8ca0\u3044\u307e\u305b\u3093\u3002\u8a18\u8ff0\u5185\u5bb9\u306f\u7279\u306b\u65ad\u308a\u306e\u306a\u3044\u9650\u308a\u57f7\u7b46\u6642\u70b9\u3088\u308a\u4ee5\u524d\u306e\u60c5\u5831\u306e\u305f\u3081\u3001\u5909\u66f4\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u7279\u306b\u3001\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3055\u308c\u308b\u5834\u5408\u304c\u3042\u308a\u3001\u672cwiki\u3067\u306e\u8aac\u660e\u3068\u306f\u6a5f\u80fd\u5185\u5bb9\u306a\u3069\u304c\u7570\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u3082\u3042\u308a\u3048\u307e\u3059\u3002\u4ee5\u4e0a\u3092\u3042\u3089\u304b\u3058\u3081\u3054\u627f\u8afe\u306e\u4e0a\u3001\u3054\u5229\u7528\u3092\u304a\u9858\u3044\u3057\u307e\u3059\u3002</p> <p>\u4ee5\u4e0b\u306e\u30c6\u30fc\u30de\u3092\u4e2d\u5fc3\u57f7\u7b46\u3057\u3066\u304f\u4e88\u5b9a\u3067\u3059\u3002\u3002</p>"},{"location":"#linux","title":"Linux\u7de8","text":"<ul> <li>CentOS7\u3001RHLE8\u3001Ubuntu18\u301c22</li> <li>PXE</li> <li>DPDK</li> </ul>"},{"location":"#virtualization","title":"Virtualization\u7de8","text":"<ul> <li>VirtualBox\u3001VMware\u3001KVM\u3001RHV\u3001Docker\u3001OpenShift</li> <li>GCP\u3001Azure</li> <li>Open vSwitch</li> </ul>"},{"location":"#application","title":"Application\u7de8","text":"<ul> <li>OpenAirInterface5G\u3001my5G\u3001Wi-Fi AP</li> </ul> <p>\u672cwiki\u306f\u3001MkDocs\u6a5f\u80fd\u306b\u3088\u308a\u3001Search Box\u3067\u5168\u8a18\u4e8b\u691c\u7d22\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3/PC\u3069\u3061\u3089\u3067\u3082\u8aad\u307f\u3084\u3059\u3044\u3088\u3046\u306b\u3001\u81ea\u52d5\u6574\u5f62\u3055\u308c\u307e\u3059\uff082023/9/9\u73fe\u5728\u306e\u8a18\u4e8b\u6570\uff1a20\uff09</p>"},{"location":"#_1","title":"\u904b\u55b6","text":"<ul> <li>\u3053\u306ewiki\u306f\u3001GitHub\u63d0\u4f9b\u306ePages\u30b5\u30fc\u30d3\u30b9\u3067\u904b\u55b6\u3057\u3066\u3044\u307e\u3059\u3002</li> <li>\u3053\u306ewiki\u306e\u539f\u7a3f\u306f\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3002</li> <li>MkDocs\u3092\u4f7f\u7528\u3057\u3066\u3001\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u3001\u30de\u30fc\u30af\u30c0\u30a6\u30f3\u304b\u3089HTML\u3078\u5909\u63db\u3057\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"#_2","title":"\u8457\u8005","text":"<ul> <li>\u68ee\u798f \u8302</li> <li>\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ce\u30fc\u30c9\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u7d9a\u3051\u308bC/C++\u30d7\u30ed\u30b0\u30e9\u30de\u30fc</li> <li>1990\u5e74\u4ee3\u5f8c\u534a\u3088\u308a\u56fa\u5b9a\u96fb\u8a71\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3001\u643a\u5e2f\u96fb\u8a71\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u6d3b\u52d5\u3057\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"#_3","title":"\u9023\u7d61\u5148","text":"<p>\u8457\u8005\u3078\u306e\u9023\u7d61\u306f\u4e0b\u8a18\u30b5\u30a4\u30c8\u306eDM\u3092\u3054\u5229\u7528\u304f\u3060\u3055\u3044\u3002</p> <ul> <li>https://qiita.com/morifuku</li> <li> <p>https://twitter.com/morifuku</p> </li> <li> <p>https://www.facebook.com/morifuku</p> </li> <li>https://www.linkedin.com/in/morifuku/</li> </ul>"},{"location":"application/","title":"Index","text":"<p>2023/9/5\u66f4\u65b0</p> <p>\u300cE. Application\u7de8\u300d\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3001\u8a2d\u5b9a\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <ul> <li>OpenAirInerface 5G\u3010E-1\u3011</li> <li>my5G\u3010E-2\u3011</li> <li>Wi-Fi Access Point\u3010E-3\u3011</li> <li>SIPp\u3010E-11\u3011</li> </ul>"},{"location":"basic/mail/","title":"postfix/dovecot\u8a2d\u5b9a","text":""},{"location":"basic/mail/#dns","title":"DNS\u30ec\u30b3\u30fc\u30c9\u8a2d\u5b9a","text":"<ul> <li>\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u5e83\u5831\u3059\u308b</li> <li>SPF\u3082\u8a2d\u5b9a\u3059\u308b</li> </ul> <pre><code>a mail 123.45.67.89\nmx mail.morifuku.net. 10\ntxt @ v=spf1 mx ~all\n</code></pre>"},{"location":"basic/mail/#gw","title":"\u30db\u30fc\u30e0GW\u306e\u30dd\u30fc\u30c8\u30de\u30c3\u30d4\u30f3\u30b0\u8a2d\u5b9a","text":"<ul> <li>smtp(25)\u3001pop3(110)\u306e\u5b9b\u5148\u3092\u8a2d\u5b9a</li> <li>\u8a3c\u660e\u66f8\u53d6\u5f97\u306bhttp(80)\u306e\u5b9b\u5148\u8a2d\u5b9a\u3082\u5fc5\u8981</li> </ul>"},{"location":"basic/mail/#firewalld","title":"Firewalld\u8a2d\u5b9a\u4f8b","text":"<ul> <li>smtp(25)\u3068pop3(110)\u3092\u901a\u904e\u3055\u305b\u308b</li> <li>\u4e0b\u4f8b\u306f\u300cmasquerade\u6a5f\u80fd\u306f\u6b8b\u3057\u3066\u3001\u5168\u30dd\u30fc\u30c8\u3092\u7a7a\u3051\u308b\u300d\u8a2d\u5b9a\u3002<code>target: ACCEPT</code>\u304c\u307f\u305d\u3002</li> </ul> <pre><code># firewall-cmd --get-active-zone\ntrusted\n  interfaces: eno1 eno2 eno3\n# firewall-cmd --list-all --zone=trusted\ntrusted (active)\n  target: ACCEPT\n\uff08\u4e2d\u7565\uff09\n  masquerade: yes\n\uff08\u5f8c\u7565\uff09\n#\n</code></pre>"},{"location":"basic/mail/#_1","title":"\u8a3c\u660e\u66f8\u8a2d\u5b9a","text":"<p>certbot\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</p> <pre><code># yum install certbot\n</code></pre> <p>\u65e7\u8a3c\u660e\u66f8\u3092\u524a\u9664\u3057\u3066\u3001\u65b0\u305f\u306b\u4f5c\u6210</p> <pre><code># mv /etc/letsencrypt /etc/letsencrypt.bak\n# mkdir -m755 /etc/letsencrypt\n# certbot certonly --standalone -d mail.morifuku.net\n\uff08agree\u3092\u6c42\u3081\u3089\u308c\u305f\u3089Y\u3067\u56de\u7b54\uff09\n</code></pre> <p>\u4f5c\u6210\u3057\u305f\u8a3c\u660e\u66f8\u306e\u6709\u52b9\u671f\u9650\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b</p> <pre><code># certbot certificates\nSaving debug log to /var/log/letsencrypt/letsencrypt.log\n\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nFound the following certs:\n  Certificate Name: mail.morifuku.net\n    Serial Number: 0123456789abcdef0123456789abcdef\n    Key Type: RSA\n    Domains: mail.morifuku.net\n    Expiry Date: 2023-12-14 00:28:09+00:00 (VALID: 89 days)\n    Certificate Path: /etc/letsencrypt/live/mail.morifuku.net/fullchain.pem\n    Private Key Path: /etc/letsencrypt/live/mail.morifuku.net/privkey.pem\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n\n</code></pre> <p>\u8a3c\u660e\u66f8\u66f4\u65b0</p> <ul> <li>\u6709\u52b9\u671f\u9650\u304c30\u65e5\u672a\u6e80\u306e\u8a3c\u660e\u66f8\u3092\u66f4\u65b0\u3059\u308b\u5834\u5408</li> </ul> <pre><code># certbot renew\n</code></pre> <ul> <li>\u5f37\u5236\u66f4\u65b0\u3059\u308b\u5834\u5408</li> </ul> <pre><code># certbot renew --force-renew\n</code></pre>"},{"location":"boot/matchbox/","title":"Matchbox","text":""},{"location":"boot/matchbox/#1","title":"1. \u6982\u8981","text":"<p> OpenShift\u306eMaster/Worker\u30ce\u30fc\u30c9\u3092\u69cb\u7bc9\u3059\u308b\u3068\u304d\u3001RedHat\u306e\u63d0\u4f9b\u3059\u308bRHCOS\u3092OS\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 RHCOS\u3092ISO\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u3001\u624b\u4f5c\u696d\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u304c\u3001Master/Worker\u306e\u53f0\u6570\u304c4\u53f05\u53f0\u3068\u5897\u3048\u3066\u3044\u304f\u3068\u5927\u5909\u306a\u4f5c\u696d\u306b\u306a\u308a\u307e\u3059\u3002 RHCOS\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3068\u3001OpenShift\u306eMaster/Worker\u30ce\u30fc\u30c9\u69cb\u7bc9\u304c\u975e\u5e38\u306b\u697d\u306b\u306a\u308a\u307e\u3059\u3002 \u672c\u7a3f\u3067\u306f\u305d\u306e\u624b\u9806\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002 </p>"},{"location":"boot/matchbox/#2","title":"2. \u89e3\u6c7a\u3057\u305f\u3044\u8ab2\u984c","text":"<p>OpenShift\u306eMaster/Worker\u30ce\u30fc\u30c9\u69cb\u7bc9\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u81ea\u52d5\u5316\u3057\u305f\u3044\u3002</p>"},{"location":"boot/matchbox/#3","title":"3. \u89e3\u6c7a\u65b9\u6cd5","text":"<p> MatchBox\u3092\u4f7f\u3063\u3066\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u81ea\u52d5\u5316\u3059\u308b\u300cPXE\u30b5\u30fc\u30d0\u300d\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002 \u901a\u5e38PXE\u30b5\u30fc\u30d0\u306fBastion\u74b0\u5883\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u304c\u3001\u307b\u304b\u306e\u30b5\u30fc\u30d0\u306b\u69cb\u7bc9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002 \u307e\u305f\u3001PXE\u30b5\u30fc\u30d0\u306f\u3001Master/Worker\u30ce\u30fc\u30c9\u3068\u540c\u3058\u30bb\u30b0\u30e1\u30f3\u30c8\u306b\u3044\u306a\u3044\u3068\u3001DHCP/TFTP\u304c\u5c4a\u304b\u306a\u304b\u3063\u305f\u308a\u3057\u3066\u9762\u5012\u3067\u3059\u3002\u3067\u304d\u306a\u3044\u8a33\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u30bb\u30f3\u30bf\u30fc\uff0b\u30a8\u30c3\u30b8\u69cb\u6210\u306a\u3069\u3001\u5e83\u57df\u306aOpenShift\u74b0\u5883\u3092\u4f5c\u308b\u5834\u5408\u306f\u3001\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u300c5.\u4eca\u5f8c\u306e\u8ffd\u8a18\u4e88\u5b9a\u300d\u53c2\u7167\u3002 </p> <p>\u4ee5\u4e0b\u306e\u6bb5\u53d6\u308a\u3067\u69cb\u7bc9\u3092\u9032\u3081\u307e\u3059\u3002</p> <ol> <li>MatchBox\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</li> <li>RHCOS\u30a4\u30e1\u30fc\u30b8\u3092\u914d\u7f6e</li> <li>MatchBox\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a</li> <li>TFTP\u306e\u8a2d\u5b9a</li> <li>dnsmasq\u306bPXE\u3092\u8a2d\u5b9a</li> <li>OpenShift\u306eMaster/Worker\u306e\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a</li> <li>VM\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u69cb\u7bc9\uff08\u8aac\u660e\u306f\u7701\u7565\uff09</li> </ol> <p>\u6b21\u7ae0\u304b\u3089\u8aac\u660e\u3059\u308b\u624b\u9806\u306f\u3001RHEL8.6\u3078\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u524d\u63d0\u306b\u3057\u3066\u3044\u307e\u3059\u3002CentOS7\u7b49\u3067\u3082\u5927\u3057\u3066\u5909\u308f\u3089\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002</p> <pre><code># cat /etc/redhat-release\nRed Hat Enterprise Linux release 8.6 (Ootpa)\n</code></pre>"},{"location":"boot/matchbox/#31-matchbox","title":"3.1 MatchBox\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>MatchBox\u306fv0.9.0\u7b49\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u304c\u3001 \u7121\u96e3\u306av0.8.0\u3092\u4f7f\u3044\u307e\u3059\u3002</p> <pre><code># cd /tmp\n# wget https://github.com/poseidon/matchbox/releases/download/v0.8.0/matchbox-v0.8.0-linux-amd64.tar.gz\n# tar xzvf matchbox-v0.8.0-linux-amd64.tar.gz\n# cd matchbox-v0.8.0-linux-amd64/\n# cp matchbox /usr/local/bin\n# cp contrib/systemd/matchbox-local.service /etc/systemd/system/matchbox.service\n# useradd -U matchbox\n# mkdir -p /var/lib/matchbox/assets\n# chown -R matchbox:matchbox /var/lib/matchbox\n# systemctl enable matchbox\nCreated symlink /etc/systemd/system/multi-user.target.wants/matchbox.service \u2192 /etc/systemd/system/matchbox.service.\n# systemctl start matchbox\n# systemctl status matchbox\n\u25cf matchbox.service - CoreOS matchbox Server\n   Loaded: loaded (/etc/systemd/system/matchbox.service; enabled; vendor preset: disabled)\n   Active: active (running) since Fri 2022-12-30 15:43:24 JST; 8s ago\n     Docs: https://github.com/coreos/matchbox\n Main PID: 3459 (matchbox)\n    Tasks: 6 (limit: 98034)\n   Memory: 2.5M\n   CGroup: /system.slice/matchbox.service\n           \u2514\u25003459 /usr/local/bin/matchbox\n\uff08\u4e2d\u7565\uff09\n#\n</code></pre>"},{"location":"boot/matchbox/#32-rhcos","title":"3.2 RHCOS\u30a4\u30e1\u30fc\u30b8\u3092\u914d\u7f6e","text":"<p>RHCOS\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3001https://mirror.openshift.com/\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u624b\u9806\u306f\u3001RHCOS4.8.14\u3092\u524d\u63d0\u3068\u3057\u3066\u307e\u3059\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code># cd /var/lib/matchbox/assets/\n# wget https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.8/4.8.14/rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\n# wget https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.8/4.8.14/rhcos-4.8.14-x86_64-live-kernel-x86_64\n# wget https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.8/4.8.14/rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\n# ll\n\u5408\u8a08 1000816\n-rw-r--r-- 1 root root  89362572 12\u6708 16  2021 rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\n-rw-r--r-- 1 root root  10030448 12\u6708 16  2021 rhcos-4.8.14-x86_64-live-kernel-x86_64\n-rw-r--r-- 1 root root 925434368 12\u6708 16  2021 rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\n#\n</code></pre>"},{"location":"boot/matchbox/#33-matchbox","title":"3.3 MatchBox\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a","text":"<p>MatchBox\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u3068\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002</p> <pre><code># tree /var/lib/matchbox/\n/var/lib/matchbox/\n\u251c\u2500\u2500 assets\n\u2502   \u251c\u2500\u2500 rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\n\u2502   \u251c\u2500\u2500 rhcos-4.8.14-x86_64-live-kernel-x86_64\n\u2502   \u2514\u2500\u2500 rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\n\u251c\u2500\u2500 groups\n\u2502   \u251c\u2500\u2500 bootstrap.json\n\u2502   \u251c\u2500\u2500 master-0.json\n\u2502   \u251c\u2500\u2500 master-1.json\n\u2502   \u251c\u2500\u2500 master-2.json\n\u2502   \u251c\u2500\u2500 worker-0.json\n\uff08\u4e2d\u7565\uff09\n\u251c\u2500\u2500 ignition\n\u2514\u2500\u2500 profiles\n    \u251c\u2500\u2500 bootstrap.json\n    \u251c\u2500\u2500 master.json\n    \u2514\u2500\u2500 worker.json\n</code></pre> <p> \u307e\u305a\u3001MatchBox\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3002Bootstrap\u7528\u3001Master\u7528\u3001Worker\u7528\u306e3\u3064\u3092\u7528\u610f\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001PXE\u30b5\u30fc\u30d0\u306eFQDN\u306fbastion.ocp48.morifuku.com\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002 \u30dd\u30fc\u30c88080\u306f\u3001RHCOS\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3067\u3001MatchBox\u304c\u5f85\u3061\u69cb\u3048\u3066\u3044\u307e\u3059\u3002 \u30dd\u30fc\u30c88008\u306f\u3001OpenShift\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u306e\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3067\u3001\u3053\u306e\u30dd\u30fc\u30c8\u3067\u5f85\u3061\u69cb\u3048\u3066\u3044\u308bNGINX\u7b49\u304cOCP\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3078\u51e6\u7406\u3092\u6e21\u3057\u307e\u3059\u3002 </p> <pre><code># pwd\n/var/lib/matchbox/profiles\n# cat bootstrap.json\n{\n  \"id\": \"bootstrap\",\n  \"name\": \"OCP4 Bootstrap\",\n  \"ignition_id\": \"bootstrap.ign\",\n  \"boot\": {\n    \"kernel\": \"/assets/rhcos-4.8.14-x86_64-live-kernel-x86_64\",\n    \"initrd\": [\n      \"/assets/rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\"\n    ],\n    \"args\": [\n      \"ip=dhcp\",\n      \"rd.neednet=1\",\n      \"coreos.inst=yes\",\n      \"coreos.inst.install_dev=/dev/sda\",\n      \"coreos.live.rootfs_url=http://bastion.ocp48.morifuku.com:8080/assets/rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\",\n      \"coreos.inst.ignition_url=http://bastion.ocp48.morifuku.com:8008/ocp/rhcos/ignitions/bootstrap.ign\"\n    ]\n  }\n}\n# cat master.json\n{\n  \"id\": \"master\",\n  \"name\": \"OCP4 Master\",\n  \"ignition_id\": \"master.ign\",\n  \"boot\": {\n    \"kernel\": \"/assets/rhcos-4.8.14-x86_64-live-kernel-x86_64\",\n    \"initrd\": [\n      \"/assets/rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\"\n    ],\n    \"args\": [\n      \"ip=dhcp\",\n      \"rd.neednet=1\",\n      \"coreos.inst=yes\",\n      \"coreos.inst.install_dev=sda\",\n      \"coreos.live.rootfs_url=http://bastion.ocp48.morifuku.com:8080/assets/rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\",\n      \"coreos.inst.ignition_url=http://bastion.ocp48.morifuku.com:8008/ocp/rhcos/ignitions/master.ign\"\n    ]\n  }\n}\n# cat worker.json\n{\n  \"id\": \"worker\",\n  \"name\": \"OCP4 Worker\",\n  \"ignition_id\": \"worker.ign\",\n  \"boot\": {\n    \"kernel\": \"/assets/rhcos-4.8.14-x86_64-live-kernel-x86_64\",\n    \"initrd\": [\n      \"/assets/rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\"\n    ],\n    \"args\": [\n      \"ip=dhcp\",\n      \"rd.neednet=1\",\n      \"coreos.inst=yes\",\n      \"coreos.inst.install_dev=sda\",\n      \"coreos.live.rootfs_url=http://bastion.ocp48.morifuku.com:8080/assets/rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\",\n      \"coreos.inst.ignition_url=http://bastion.ocp48.morifuku.com:8008/ocp/rhcos/ignitions/worker.ign\"\n    ]\n  }\n}\n# chown matchbox:matchbox *\n# ll\n\u5408\u8a08 12\n-rwxr-xr-x 1 matchbox matchbox 609 12\u6708 30 16:22 bootstrap.json\n-rwxr-xr-x 1 matchbox matchbox 592 12\u6708 30 16:22 master.json\n-rwxr-xr-x 1 matchbox matchbox 588 12\u6708 30 16:23 worker.json\n#\n</code></pre> <p>PXE\u30b5\u30fc\u30d0\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304d\u305fPXE\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306eMAC\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u3001\u3069\u306eMatchBox\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u9069\u7528\u3059\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 Bootstrap\u7528\u306e\u4ed6\u306b\u3001\u5168Master/Worker\u7528\u306e\u3082\u306e\u3092\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <pre><code># pwd\n/var/lib/matchbox/groups\n# cat bootstrap.json\n{\n  \"id\": \"bootstrap\",\n  \"name\": \"OCP4 Bootstrap\",\n  \"profile\": \"bootstrap\",\n  \"selector\": {\n  \"mac\": \"00:01:e6:00:00:22\"\n  }\n}\n# cat master-0.json\n{\n  \"id\": \"master-0\",\n  \"name\": \"OCP4 Master 0\",\n  \"profile\": \"master\",\n  \"selector\": {\n    \"mac\": \"00:01:e6:00:00:23\"\n  }\n}\n# cat worker-0.json\n{\n  \"id\": \"worker-0\",\n  \"name\": \"OCP4 Worker 0\",\n  \"profile\": \"worker\",\n  \"selector\": {\n    \"mac\": \"00:01:e6:00:00:26\"\n  }\n}\n# ll bootstrap.json master-0.json worker-0.json\n-rwxr-xr-x 1 matchbox matchbox 140 12\u6708 30 16:21 bootstrap.json\n-rwxr-xr-x 1 matchbox matchbox 130 12\u6708 30 16:21 master-0.json\n-rwxr-xr-x 1 matchbox matchbox 130 12\u6708 30 16:21 worker-0.json\n#\n</code></pre> <p>\u4e0a\u4f8b\u3067\u306f\u30013\u3064\u3057\u304b\u8a18\u8f09\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u5b9f\u969b\u306b\u306f\u5168\u30ce\u30fc\u30c9\u5206\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"boot/matchbox/#34-tftp","title":"3.4 TFTP\u306e\u8a2d\u5b9a","text":"<pre><code># wget http://boot.ipxe.org/undionly.kpxe\n# chmod 777 undionly.kpxe\n# mkdir -p /var/lib/tftpboot/\n# mv undionly.kpxe /var/lib/tftpboot/\n#\n</code></pre>"},{"location":"boot/matchbox/#35-dnsmasqpxe","title":"3.5 dnsmasq\u306bPXE\u3092\u8a2d\u5b9a","text":"<p>\u307e\u305a\u3001MatchBox\u304c\u540d\u524d\u89e3\u6c7a\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092/etc/hosts\u306b\u767b\u9332\u3057\u307e\u3059\u3002</p> <pre><code>192.168.2.21 bastion.ocp48.morifuku.com bastion\n192.168.2.22 bootstrap.ocp48.morifuku.com bootstrap\n192.168.2.23 master-0.ocp48.morifuku.com master-0\n192.168.2.24 master-1.ocp48.morifuku.com master-1\n192.168.2.25 master-2.ocp48.morifuku.com master-2\n192.168.2.26 worker-0.ocp48.morifuku.com worker-0\n\uff08\u5f8c\u7565\uff09\n</code></pre> <p>dnsmasq\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001</p> <pre><code># yum install dnsmasq\n</code></pre> <p>/etc/dnsmasq.conf\u306e\u6700\u7d42\u884c\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001DNS\u30b5\u30fc\u30d0\u3068\u3001NAT\u30b5\u30fc\u30d0\u3092192.168.2.21\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u74b0\u5883\u306b\u3088\u3063\u3066\u5909\u3048\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>### OpenShift part\ndhcp-host=00:01:e6:00:00:22,bootstrap,192.168.2.22\ndhcp-host=00:01:e6:00:00:23,master-0,192.168.2.23\ndhcp-host=00:01:e6:00:00:24,master-1,192.168.2.24\ndhcp-host=00:01:e6:00:00:25,master-2,192.168.2.25\ndhcp-host=00:01:e6:00:00:26,worker-0,192.168.2.26\n\uff08\u4e2d\u7565\uff09\ndhcp-option=option:dns-server,192.168.2.21\ndhcp-option=option:netmask,255.255.255.0\ndhcp-option=option:router,192.168.2.21\ndhcp-leasefile=/var/lib/dnsmasq/dnsmasq.leases\nenable-tftp\ntftp-root=/var/lib/tftpboot\npxe-service=tag:#ipxe,x86PC,\"PXE chainload to iPXE\",undionly.kpxe\ndhcp-userclass=set:ipxe,iPXE\npxe-service=tag:ipxe,x86PC,\"iPXE\",http://bastion.ocp48.morifuku.com:8080/boot.ipxe\n</code></pre> <p>\u307e\u305f\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066<code>dsmasq.resolv.conf</code>\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code># cat /etc/dnsmasq.resolv.conf\nnameserver 8.8.8.8\n</code></pre> <p>dnsmasq\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code># systemctl enable dnsmasq\n# systemctl start dnsmasq\n# systemctl status dnsmasq\n\u25cf dnsmasq.service - DNS caching server.\n   Loaded: loaded (/usr/lib/systemd/system/dnsmasq.service; enabled; vendor preset: disabled)\n   Active: active (running) since Fri 2022-12-30 17:15:39 JST; 7min ago\n Main PID: 4829 (dnsmasq)\n    Tasks: 1 (limit: 98034)\n   Memory: 764.0K\n   CGroup: /system.slice/dnsmasq.service\n           \u2514\u25004829 /usr/sbin/dnsmasq -k\n\n12\u6708 30 17:15:39 systemd[1]: Started DNS caching server..\n#\n</code></pre>"},{"location":"boot/matchbox/#36-openshiftmasterworker","title":"3.6 OpenShift\u306eMaster/Worker\u306e\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a","text":"<p>nginx\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001</p> <pre><code># yum install nginx\n</code></pre> <p><code>/etc/nginx/nginx.conf</code>\u3092\u7de8\u96c6\u3057\u3066\uff08<code>edit for PXE</code>\u3092\u30b3\u30e1\u30f3\u30c8\u3092\u5165\u308c\u305f4\u884c\uff09</p> <pre><code>    server {\n        listen        8008 default_server;     # edit for PXE\n        #listen       80 default_server;       # edit for PXE\n        #listen       [::]:80 default_server;  # edit for PXE\n        server_name  _;\n        root         /usr/share/nginx/html;\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        location / {\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n        disable_symlinks off;   # edit for PXE\n    }\n</code></pre> <p>\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code># systemctl enable nginx\nCreated symlink /etc/systemd/system/multi-user.target.wants/nginx.service \u2192 /usr/lib/systemd/system/nginx.service.\n# systemctl start nginx\n</code></pre> <p>OpenShit\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u306b\u751f\u6210\u3055\u308c\u305f\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u914d\u7f6e\u3057\u307e\u3059\u3002</p> <p>\uff08<code>openshift-install</code>\u306e\u4f7f\u7528\u65b9\u6cd5\u306f\u672c\u7a3f\u3067\u306f\u7701\u7565\uff09</p> <pre><code># pwd\n/root/ocp\n# ./openshift-install create manifests --dir=bare-metal\n\uff08\u4e2d\u7565\uff09\n# ./openshift-install create ignition-configs --dir=bare-metal\n\uff08\u4e2d\u7565\uff09\n# mkdir -p /usr/share/nginx/html/ocp/rhcos/ignitions/\n# cp ./bare-metal/*.ign /usr/share/nginx/html/ocp/rhcos/ignitions/\n# ll /usr/share/nginx/html/ocp/rhcos/ignitions/\n\u5408\u8a08 276\n-rw-r--r-- 1 root root 271950  9\u6708 23 16:47 bootstrap.ign\n-rw-r--r-- 1 root root   1725  9\u6708 23 16:47 master.ign\n-rw-r--r-- 1 root root   1725  9\u6708 23 16:47 worker.ign\n#\n</code></pre>"},{"location":"boot/matchbox/#37-vm","title":"3.7 VM\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u69cb\u7bc9","text":"<p> BOOTSTRAP\u3001MASTER\u3001WORKER\u306eVM\u3092PXE\u30d6\u30fc\u30c8\u6307\u5b9a\u3067\u8d77\u52d5\u3059\u308b\u3068\u3001\u672cPXE\u30b5\u30fc\u30d0\u304b\u3089RHCOS\u304c\u30cd\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 \u7d9a\u3044\u3066\u3001\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3067\u6307\u5b9a\u3055\u308c\u305f\u3001BOOTSTRAP/MASTER/WORKER\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3001 OCP\u304c\u81ea\u52d5\u3067\u69cb\u7bc9\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002 </p> <p>\uff08\u8a73\u7d30\u8aac\u660e\u306f\u7701\u7565\uff09</p>"},{"location":"boot/matchbox/#4","title":"4. \u305d\u306e\u4ed6\u306e\u89e3\u6c7a\u65b9\u6cd5","text":"<p>MatchBox\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u7c21\u5358\u306bPXE\u30b5\u30fc\u30d0\u74b0\u5883\u3092\u7528\u610f\u306b\u69cb\u7bc9\u3059\u308b\u3068\u3053\u304c\u3067\u304d\u307e\u3059\u304c\u3001 GitHub\u5185\u3092\u691c\u7d22\u3057\u3066\u307f\u308b\u3068\u3001\u305d\u306e\u4ed6\u306b\u3082PXE\u30b5\u30fc\u30d0\u69cb\u7bc9\u306e\u65b9\u6cd5\u304c\u3044\u308d\u3044\u308d\u3042\u308a\u305d\u3046\u3067\u3059\u3002</p>"},{"location":"boot/matchbox/#5","title":"5. \u4eca\u5f8c\u306e\u8ffd\u8a18\u4e88\u5b9a","text":"<ul> <li>\u4ed6\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306eRHCOS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3092\u9069\u5b9c\u8ffd\u52a0\u4e88\u5b9a\u3002</li> <li>\u300c\u30bb\u30f3\u30bf\u30fc\uff0b\u30a8\u30c3\u30b8\u69cb\u6210\u300d\u306a\u3069\u3001\u5e83\u57df\u306aOpenShift\u74b0\u5883\u3092\u4f5c\u308b\u5834\u5408\u3092\u8a18\u8f09\u4e88\u5b9a\u3002</li> </ul>"},{"location":"boot/matchbox/#6","title":"6. \u95a2\u9023\u8a18\u4e8b","text":""},{"location":"boot/matchbox/#7","title":"7. \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9","text":"<ul> <li>MatchBox + PXE\u3067OpenShift\u7528\u306eOS\u3001RHEL CoreOS\u3092\u5168\u81ea\u52d5\u3067\u8d77\u52d5\u3059\u308b(KVM)</li> <li>MatchBox v0.8.0</li> </ul>"},{"location":"boot/matchbox/#8","title":"8. \u4ed8\u9332","text":""},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/","title":"MatchBox\u8a2d\u5b9a","text":""},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#1","title":"1. \u6982\u8981","text":"<p> OpenShift\u306eMaster/Worker\u30ce\u30fc\u30c9\u3092\u69cb\u7bc9\u3059\u308b\u3068\u304d\u3001RedHat\u306e\u63d0\u4f9b\u3059\u308bRHCOS\u3092OS\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002 RHCOS\u3092ISO\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u3001\u624b\u4f5c\u696d\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u304c\u3001Master/Worker\u306e\u53f0\u6570\u304c4\u53f05\u53f0\u3068\u5897\u3048\u3066\u3044\u304f\u3068\u5927\u5909\u306a\u4f5c\u696d\u306b\u306a\u308a\u307e\u3059\u3002 RHCOS\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3068\u3001OpenShift\u306eMaster/Worker\u30ce\u30fc\u30c9\u69cb\u7bc9\u304c\u975e\u5e38\u306b\u697d\u306b\u306a\u308a\u307e\u3059\u3002 \u672c\u7a3f\u3067\u306f\u305d\u306e\u624b\u9806\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002 </p>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#2","title":"2. \u89e3\u6c7a\u3057\u305f\u3044\u8ab2\u984c","text":"<p>OpenShift\u306eMaster/Worker\u30ce\u30fc\u30c9\u69cb\u7bc9\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u81ea\u52d5\u5316\u3057\u305f\u3044\u3002</p>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#3","title":"3. \u89e3\u6c7a\u65b9\u6cd5","text":"<p> MatchBox\u3092\u4f7f\u3063\u3066\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u81ea\u52d5\u5316\u3059\u308b\u300cPXE\u30b5\u30fc\u30d0\u300d\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002 \u901a\u5e38PXE\u30b5\u30fc\u30d0\u306fBastion\u74b0\u5883\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u304c\u3001\u307b\u304b\u306e\u30b5\u30fc\u30d0\u306b\u69cb\u7bc9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002 \u307e\u305f\u3001PXE\u30b5\u30fc\u30d0\u306f\u3001Master/Worker\u30ce\u30fc\u30c9\u3068\u540c\u3058\u30bb\u30b0\u30e1\u30f3\u30c8\u306b\u3044\u306a\u3044\u3068\u3001DHCP/TFTP\u304c\u5c4a\u304b\u306a\u304b\u3063\u305f\u308a\u3057\u3066\u9762\u5012\u3067\u3059\u3002\u3067\u304d\u306a\u3044\u8a33\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 \u30bb\u30f3\u30bf\u30fc\uff0b\u30a8\u30c3\u30b8\u69cb\u6210\u306a\u3069\u3001\u5e83\u57df\u306aOpenShift\u74b0\u5883\u3092\u4f5c\u308b\u5834\u5408\u306f\u3001\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u300c5.\u4eca\u5f8c\u306e\u8ffd\u8a18\u4e88\u5b9a\u300d\u53c2\u7167\u3002 </p> <p>\u4ee5\u4e0b\u306e\u6bb5\u53d6\u308a\u3067\u69cb\u7bc9\u3092\u9032\u3081\u307e\u3059\u3002</p> <ol> <li>MatchBox\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb</li> <li>RHCOS\u30a4\u30e1\u30fc\u30b8\u3092\u914d\u7f6e</li> <li>MatchBox\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a</li> <li>TFTP\u306e\u8a2d\u5b9a</li> <li>dnsmasq\u306bPXE\u3092\u8a2d\u5b9a</li> <li>OpenShift\u306eMaster/Worker\u306e\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a</li> <li>VM\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u69cb\u7bc9\uff08\u8aac\u660e\u306f\u7701\u7565\uff09</li> </ol> <p>\u6b21\u7ae0\u304b\u3089\u8aac\u660e\u3059\u308b\u624b\u9806\u306f\u3001RHEL8.6\u3078\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u524d\u63d0\u306b\u3057\u3066\u3044\u307e\u3059\u3002CentOS7\u7b49\u3067\u3082\u5927\u3057\u3066\u5909\u308f\u3089\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002</p> <pre><code># cat /etc/redhat-release\nRed Hat Enterprise Linux release 8.6 (Ootpa)\n</code></pre>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#31-matchbox","title":"3.1 MatchBox\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>MatchBox\u306fv0.9.0\u7b49\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u304c\u3001 \u7121\u96e3\u306av0.8.0\u3092\u4f7f\u3044\u307e\u3059\u3002</p> <pre><code># cd /tmp\n# wget https://github.com/poseidon/matchbox/releases/download/v0.8.0/matchbox-v0.8.0-linux-amd64.tar.gz\n# tar xzvf matchbox-v0.8.0-linux-amd64.tar.gz\n# cd matchbox-v0.8.0-linux-amd64/\n# cp matchbox /usr/local/bin\n# cp contrib/systemd/matchbox-local.service /etc/systemd/system/matchbox.service\n# useradd -U matchbox\n# mkdir -p /var/lib/matchbox/assets\n# chown -R matchbox:matchbox /var/lib/matchbox\n# systemctl enable matchbox\nCreated symlink /etc/systemd/system/multi-user.target.wants/matchbox.service \u2192 /etc/systemd/system/matchbox.service.\n# systemctl start matchbox\n# systemctl status matchbox\n\u25cf matchbox.service - CoreOS matchbox Server\n   Loaded: loaded (/etc/systemd/system/matchbox.service; enabled; vendor preset: disabled)\n   Active: active (running) since Fri 2022-12-30 15:43:24 JST; 8s ago\n     Docs: https://github.com/coreos/matchbox\n Main PID: 3459 (matchbox)\n    Tasks: 6 (limit: 98034)\n   Memory: 2.5M\n   CGroup: /system.slice/matchbox.service\n           \u2514\u25003459 /usr/local/bin/matchbox\n\uff08\u4e2d\u7565\uff09\n#\n</code></pre>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#32-rhcos","title":"3.2 RHCOS\u30a4\u30e1\u30fc\u30b8\u3092\u914d\u7f6e","text":"<p>RHCOS\u306e\u30a4\u30e1\u30fc\u30b8\u306f\u3001https://mirror.openshift.com/\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u624b\u9806\u306f\u3001RHCOS4.8.14\u3092\u524d\u63d0\u3068\u3057\u3066\u307e\u3059\u304c\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code># cd /var/lib/matchbox/assets/\n# wget https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.8/4.8.14/rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\n# wget https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.8/4.8.14/rhcos-4.8.14-x86_64-live-kernel-x86_64\n# wget https://mirror.openshift.com/pub/openshift-v4/dependencies/rhcos/4.8/4.8.14/rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\n# ll\n\u5408\u8a08 1000816\n-rw-r--r-- 1 root root  89362572 12\u6708 16  2021 rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\n-rw-r--r-- 1 root root  10030448 12\u6708 16  2021 rhcos-4.8.14-x86_64-live-kernel-x86_64\n-rw-r--r-- 1 root root 925434368 12\u6708 16  2021 rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\n#\n</code></pre>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#33-matchbox","title":"3.3 MatchBox\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a","text":"<p>MatchBox\u306e\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u3068\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002</p> <pre><code># tree /var/lib/matchbox/\n/var/lib/matchbox/\n\u251c\u2500\u2500 assets\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 rhcos-4.8.14-x86_64-live-kernel-x86_64\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\n\u251c\u2500\u2500 groups\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 bootstrap.json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 master-0.json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 master-1.json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 master-2.json\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 worker-0.json\n\uff08\u4e2d\u7565\uff09\n\u251c\u2500\u2500 ignition\n\u2514\u2500\u2500 profiles\n    \u251c\u2500\u2500 bootstrap.json\n    \u251c\u2500\u2500 master.json\n    \u2514\u2500\u2500 worker.json\u3000\n</code></pre> <p> \u307e\u305a\u3001MatchBox\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3002Bootstrap\u7528\u3001Master\u7528\u3001Worker\u7528\u306e3\u3064\u3092\u7528\u610f\u3057\u307e\u3059\u3002 \u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001PXE\u30b5\u30fc\u30d0\u306eFQDN\u306fbastion.ocp48.morifuku.com\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002 \u30dd\u30fc\u30c88080\u306f\u3001RHCOS\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3067\u3001MatchBox\u304c\u5f85\u3061\u69cb\u3048\u3066\u3044\u307e\u3059\u3002 \u30dd\u30fc\u30c88008\u306f\u3001OpenShift\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u306e\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3067\u3001\u3053\u306e\u30dd\u30fc\u30c8\u3067\u5f85\u3061\u69cb\u3048\u3066\u3044\u308bNGINX\u7b49\u304cOCP\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3078\u51e6\u7406\u3092\u6e21\u3057\u307e\u3059\u3002 </p> <pre><code># pwd\n/var/lib/matchbox/profiles\n# cat bootstrap.json\n{\n  \"id\": \"bootstrap\",\n  \"name\": \"OCP4 Bootstrap\",\n  \"ignition_id\": \"bootstrap.ign\",\n  \"boot\": {\n    \"kernel\": \"/assets/rhcos-4.8.14-x86_64-live-kernel-x86_64\",\n    \"initrd\": [\n      \"/assets/rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\"\n    ],\n    \"args\": [\n      \"ip=dhcp\",\n      \"rd.neednet=1\",\n      \"coreos.inst=yes\",\n      \"coreos.inst.install_dev=/dev/sda\",\n      \"coreos.live.rootfs_url=http://bastion.ocp48.morifuku.com:8080/assets/rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\",\n      \"coreos.inst.ignition_url=http://bastion.ocp48.morifuku.com:8008/ocp/rhcos/ignitions/bootstrap.ign\"\n    ]\n  }\n}\n# cat master.json\n{\n  \"id\": \"master\",\n  \"name\": \"OCP4 Master\",\n  \"ignition_id\": \"master.ign\",\n  \"boot\": {\n    \"kernel\": \"/assets/rhcos-4.8.14-x86_64-live-kernel-x86_64\",\n    \"initrd\": [\n      \"/assets/rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\"\n    ],\n    \"args\": [\n      \"ip=dhcp\",\n      \"rd.neednet=1\",\n      \"coreos.inst=yes\",\n      \"coreos.inst.install_dev=sda\",\n      \"coreos.live.rootfs_url=http://bastion.ocp48.morifuku.com:8080/assets/rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\",\n      \"coreos.inst.ignition_url=http://bastion.ocp48.morifuku.com:8008/ocp/rhcos/ignitions/master.ign\"\n    ]\n  }\n}\n# cat worker.json\n{\n  \"id\": \"worker\",\n  \"name\": \"OCP4 Worker\",\n  \"ignition_id\": \"worker.ign\",\n  \"boot\": {\n    \"kernel\": \"/assets/rhcos-4.8.14-x86_64-live-kernel-x86_64\",\n    \"initrd\": [\n      \"/assets/rhcos-4.8.14-x86_64-live-initramfs.x86_64.img\"\n    ],\n    \"args\": [\n      \"ip=dhcp\",\n      \"rd.neednet=1\",\n      \"coreos.inst=yes\",\n      \"coreos.inst.install_dev=sda\",\n      \"coreos.live.rootfs_url=http://bastion.ocp48.morifuku.com:8080/assets/rhcos-4.8.14-x86_64-live-rootfs.x86_64.img\",\n      \"coreos.inst.ignition_url=http://bastion.ocp48.morifuku.com:8008/ocp/rhcos/ignitions/worker.ign\"\n    ]\n  }\n}\n# chown matchbox:matchbox *\n# ll\n\u5408\u8a08 12\n-rwxr-xr-x 1 matchbox matchbox 609 12\u6708 30 16:22 bootstrap.json\n-rwxr-xr-x 1 matchbox matchbox 592 12\u6708 30 16:22 master.json\n-rwxr-xr-x 1 matchbox matchbox 588 12\u6708 30 16:23 worker.json\n#\n</code></pre> <p>PXE\u30b5\u30fc\u30d0\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304d\u305fPXE\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306eMAC\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u3001\u3069\u306eMatchBox\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u9069\u7528\u3059\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002 Bootstrap\u7528\u306e\u4ed6\u306b\u3001\u5168Master/Worker\u7528\u306e\u3082\u306e\u3092\u7528\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <pre><code># pwd\n/var/lib/matchbox/groups\n# cat bootstrap.json\n{\n  \"id\": \"bootstrap\",\n  \"name\": \"OCP4 Bootstrap\",\n  \"profile\": \"bootstrap\",\n  \"selector\": {\n  \"mac\": \"00:01:e6:00:00:22\"\n  }\n}\n# cat master-0.json\n{\n  \"id\": \"master-0\",\n  \"name\": \"OCP4 Master 0\",\n  \"profile\": \"master\",\n  \"selector\": {\n    \"mac\": \"00:01:e6:00:00:23\"\n  }\n}\n# cat worker-0.json\n{\n  \"id\": \"worker-0\",\n  \"name\": \"OCP4 Worker 0\",\n  \"profile\": \"worker\",\n  \"selector\": {\n    \"mac\": \"00:01:e6:00:00:26\"\n  }\n}\n# ll bootstrap.json master-0.json worker-0.json\n-rwxr-xr-x 1 matchbox matchbox 140 12\u6708 30 16:21 bootstrap.json\n-rwxr-xr-x 1 matchbox matchbox 130 12\u6708 30 16:21 master-0.json\n-rwxr-xr-x 1 matchbox matchbox 130 12\u6708 30 16:21 worker-0.json\n#\n</code></pre> <p>\u4e0a\u4f8b\u3067\u306f\u30013\u3064\u3057\u304b\u8a18\u8f09\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u5b9f\u969b\u306b\u306f\u5168\u30ce\u30fc\u30c9\u5206\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#34-tftp","title":"3.4 TFTP\u306e\u8a2d\u5b9a","text":"<pre><code># wget http://boot.ipxe.org/undionly.kpxe\n# chmod 777 undionly.kpxe\n# mkdir -p /var/lib/tftpboot/\n# mv undionly.kpxe /var/lib/tftpboot/\n#\n</code></pre>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#35-dnsmasqpxe","title":"3.5 dnsmasq\u306bPXE\u3092\u8a2d\u5b9a","text":"<p>\u307e\u305a\u3001MatchBox\u304c\u540d\u524d\u89e3\u6c7a\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092/etc/hosts\u306b\u767b\u9332\u3057\u307e\u3059\u3002</p> <pre><code>192.168.2.21 bastion.ocp48.morifuku.com bastion\n192.168.2.22 bootstrap.ocp48.morifuku.com bootstrap\n192.168.2.23 master-0.ocp48.morifuku.com master-0\n192.168.2.24 master-1.ocp48.morifuku.com master-1\n192.168.2.25 master-2.ocp48.morifuku.com master-2\n192.168.2.26 worker-0.ocp48.morifuku.com worker-0\n\uff08\u5f8c\u7565\uff09\n</code></pre> <p>dnsmasq\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001</p> <pre><code># yum install dnsmasq\n</code></pre> <p>/etc/dnsmasq.conf\u306e\u6700\u7d42\u884c\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</p> <p>\u3053\u306e\u4f8b\u3067\u306f\u3001DNS\u30b5\u30fc\u30d0\u3068\u3001NAT\u30b5\u30fc\u30d0\u3092192.168.2.21\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u74b0\u5883\u306b\u3088\u3063\u3066\u5909\u3048\u3066\u304f\u3060\u3055\u3044\u3002</p> <pre><code>### OpenShift part\ndhcp-host=00:01:e6:00:00:22,bootstrap,192.168.2.22\ndhcp-host=00:01:e6:00:00:23,master-0,192.168.2.23\ndhcp-host=00:01:e6:00:00:24,master-1,192.168.2.24\ndhcp-host=00:01:e6:00:00:25,master-2,192.168.2.25\ndhcp-host=00:01:e6:00:00:26,worker-0,192.168.2.26\n\uff08\u4e2d\u7565\uff09\ndhcp-option=option:dns-server,192.168.2.21\ndhcp-option=option:netmask,255.255.255.0\ndhcp-option=option:router,192.168.2.21\ndhcp-leasefile=/var/lib/dnsmasq/dnsmasq.leases\nenable-tftp\ntftp-root=/var/lib/tftpboot\npxe-service=tag:#ipxe,x86PC,\"PXE chainload to iPXE\",undionly.kpxe\ndhcp-userclass=set:ipxe,iPXE\npxe-service=tag:ipxe,x86PC,\"iPXE\",http://bastion.ocp48.morifuku.com:8080/boot.ipxe\n</code></pre> <p>\u307e\u305f\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066<code>dsmasq.resolv.conf</code>\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code># cat /etc/dnsmasq.resolv.conf\nnameserver 8.8.8.8\n</code></pre> <p>dnsmasq\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code># systemctl enable dnsmasq\n# systemctl start dnsmasq\n# systemctl status dnsmasq\n\u25cf dnsmasq.service - DNS caching server.\n   Loaded: loaded (/usr/lib/systemd/system/dnsmasq.service; enabled; vendor preset: disabled)\n   Active: active (running) since Fri 2022-12-30 17:15:39 JST; 7min ago\n Main PID: 4829 (dnsmasq)\n    Tasks: 1 (limit: 98034)\n   Memory: 764.0K\n   CGroup: /system.slice/dnsmasq.service\n           \u2514\u25004829 /usr/sbin/dnsmasq -k\n\n12\u6708 30 17:15:39 systemd[1]: Started DNS caching server..\n#\n</code></pre>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#36-openshiftmasterworker","title":"3.6 OpenShift\u306eMaster/Worker\u306e\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a","text":"<p>nginx\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001</p> <pre><code># yum install nginx\n</code></pre> <p><code>/etc/nginx/nginx.conf</code>\u3092\u7de8\u96c6\u3057\u3066\uff08<code>edit for PXE</code>\u3092\u30b3\u30e1\u30f3\u30c8\u3092\u5165\u308c\u305f4\u884c\uff09</p> <pre><code>    server {\n        listen        8008 default_server;     # edit for PXE\n        #listen       80 default_server;       # edit for PXE\n        #listen       [::]:80 default_server;  # edit for PXE\n        server_name  _;\n        root         /usr/share/nginx/html;\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        location / {\n        }\n\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n        disable_symlinks off;   # edit for PXE\n    }\n</code></pre> <p>\u8d77\u52d5\u3057\u307e\u3059\u3002</p> <pre><code># systemctl enable nginx\nCreated symlink /etc/systemd/system/multi-user.target.wants/nginx.service \u2192 /usr/lib/systemd/system/nginx.service.\n# systemctl start nginx\n</code></pre> <p>OpenShit\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u306b\u751f\u6210\u3055\u308c\u305f\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u914d\u7f6e\u3057\u307e\u3059\u3002</p> <p>\uff08<code>openshift-install</code>\u306e\u4f7f\u7528\u65b9\u6cd5\u306f\u672c\u7a3f\u3067\u306f\u7701\u7565\uff09</p> <pre><code># pwd\n/root/ocp\n# ./openshift-install create manifests --dir=bare-metal\n\uff08\u4e2d\u7565\uff09\n# ./openshift-install create ignition-configs --dir=bare-metal\n\uff08\u4e2d\u7565\uff09\n# mkdir -p /usr/share/nginx/html/ocp/rhcos/ignitions/\n# cp ./bare-metal/*.ign /usr/share/nginx/html/ocp/rhcos/ignitions/\n# ll /usr/share/nginx/html/ocp/rhcos/ignitions/\n\u5408\u8a08 276\n-rw-r--r-- 1 root root 271950  9\u6708 23 16:47 bootstrap.ign\n-rw-r--r-- 1 root root   1725  9\u6708 23 16:47 master.ign\n-rw-r--r-- 1 root root   1725  9\u6708 23 16:47 worker.ign\n#\n</code></pre>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#37-vm","title":"3.7 VM\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u69cb\u7bc9","text":"<p> BOOTSTRAP\u3001MASTER\u3001WORKER\u306eVM\u3092PXE\u30d6\u30fc\u30c8\u6307\u5b9a\u3067\u8d77\u52d5\u3059\u308b\u3068\u3001\u672cPXE\u30b5\u30fc\u30d0\u304b\u3089RHCOS\u304c\u30cd\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002 \u7d9a\u3044\u3066\u3001\u30a4\u30b0\u30cb\u30c3\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u3067\u6307\u5b9a\u3055\u308c\u305f\u3001BOOTSTRAP/MASTER/WORKER\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3001 OCP\u304c\u81ea\u52d5\u3067\u69cb\u7bc9\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002 </p> <p>\uff08\u8a73\u7d30\u8aac\u660e\u306f\u7701\u7565\uff09</p>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#4","title":"4. \u305d\u306e\u4ed6\u306e\u89e3\u6c7a\u65b9\u6cd5","text":"<p>MatchBox\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u7c21\u5358\u306bPXE\u30b5\u30fc\u30d0\u74b0\u5883\u3092\u7528\u610f\u306b\u69cb\u7bc9\u3059\u308b\u3068\u3053\u304c\u3067\u304d\u307e\u3059\u304c\u3001 GitHub\u5185\u3092\u691c\u7d22\u3057\u3066\u307f\u308b\u3068\u3001\u305d\u306e\u4ed6\u306b\u3082PXE\u30b5\u30fc\u30d0\u69cb\u7bc9\u306e\u65b9\u6cd5\u304c\u3044\u308d\u3044\u308d\u3042\u308a\u305d\u3046\u3067\u3059\u3002</p>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#5","title":"5. \u4eca\u5f8c\u306e\u8ffd\u8a18\u4e88\u5b9a","text":"<ul> <li>\u4ed6\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306eRHCOS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3092\u9069\u5b9c\u8ffd\u52a0\u4e88\u5b9a\u3002</li> <li>\u300c\u30bb\u30f3\u30bf\u30fc\uff0b\u30a8\u30c3\u30b8\u69cb\u6210\u300d\u306a\u3069\u3001\u5e83\u57df\u306aOpenShift\u74b0\u5883\u3092\u4f5c\u308b\u5834\u5408\u3092\u8a18\u8f09\u4e88\u5b9a\u3002</li> </ul>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#6","title":"6. \u95a2\u9023\u8a18\u4e8b","text":""},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#7","title":"7. \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9","text":"<ul> <li>MatchBox + PXE\u3067OpenShift\u7528\u306eOS\u3001RHEL CoreOS\u3092\u5168\u81ea\u52d5\u3067\u8d77\u52d5\u3059\u308b(KVM)</li> <li>MatchBox v0.8.0</li> </ul>"},{"location":"docker/MatchBox%E8%A8%AD%E5%AE%9A/#8","title":"8. \u4ed8\u9332","text":""},{"location":"dpdk/","title":"DPDK\u6982\u8981","text":"<p>DPDK\u6280\u8853\u306b\u95a2\u3057\u3066\u3001\u4ee5\u4e0b\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <ul> <li>DPDK\u306e\u8a2d\u5b9a</li> <li>DPDK\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</li> </ul>"},{"location":"dpdk/#a-dpdk","title":"A. DPDK\u8a2d\u5b9a","text":"<p>\u307e\u305a\u3001DPDK SDK\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002</p> <ul> <li>RHEL8\u306bDPDK22 SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30101\u3011</li> <li>CentOS7\u306bDPDK22 SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30102\u3011</li> <li>Ubuntu22.04\u306bDPDK22 SDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30103\u3011</li> </ul> <p>\u3064\u3065\u3044\u3066\u3001DPDK\u74b0\u5883\u306e\u8a2d\u5b9a\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002</p>"},{"location":"dpdk/#b-dpdk-testpmd","title":"B. dpdk-testpmd\u3067\u3001\u3044\u308d\u3044\u308d\u3084\u3063\u3066\u307f\u308b\u3002","text":""},{"location":"dpdk/#c-dpdk","title":"C. DPDK\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0","text":"<p>DPDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001dpdk-testpmd\u304c\u52d5\u304f\u3088\u3046\u306b\u306a\u3063\u3066\u3082\u3001\u3042\u307e\u308a\u611f\u52d5\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u300cL2\u30ec\u30d9\u30eb\u3067\u3067\u305f\u3089\u3081\u306a\u30d1\u30b1\u30c3\u30c8\u304c\u98db\u3093\u3067\u308b\u3060\u3051\u300d\u3060\u304b\u3089\u3067\u3059\u3002ARP\u3001IP\u3001ICMP\u3001UDP\u7b49\u3092\u81ea\u529b\u3067\u5b9f\u88c5\u3057\u3066\u3001\u4e0a\u4f4d\u306e\u30ec\u30a4\u30e4\u304c\u52d5\u304d\u59cb\u3081\u308b\u3068\u3001\u611f\u52d5\u304c\u5f97\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u9806\u3067DPDK\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002</p> <ul> <li>ARP: \u81ea\u5206\u306eMAC\u30a2\u30c9\u30ec\u30b9\u3092\u5e83\u5831\u3057\u305f\u308a\u3001\u76f8\u624b\u306eMAC\u30a2\u30c9\u30ec\u30b9\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002VIP\u3082\u5b9f\u88c5\u3067\u304d\u307e\u3059\u3002</li> <li>IPv4: ICMP\u3084UDP\u3084TCP\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u4e57\u305b\u308b\u7bb1\u3067\u3059\u3002\u30c1\u30a7\u30c3\u30af\u30b5\u30e0\u3092\u30cf\u30fc\u30c9\u3067\u884c\u308f\u305b\u308b\uff08\u30aa\u30d5\u30ed\u30fc\u30c9\uff09\u304a\u307e\u3058\u306a\u3044\u3082\u884c\u3044\u307e\u3059\u3002</li> <li>ICMP: ICMP-Echo\u306e\u307f\u5b9f\u88c5\u3057\u307e\u3059\u3002\u5916\u90e8\u304b\u3089\u306eping\u306b\u5fdc\u7b54\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</li> <li>UDP: RTP\u3084GTP\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u4e57\u305b\u308b\u305f\u3081\u306e\u7bb1\u3067\u3059\u3002\u30c1\u30a7\u30c3\u30af\u30b5\u30e0\u3092\u30cf\u30fc\u30c9\u3067\u884c\u308f\u305b\u308b\uff08\u30aa\u30d5\u30ed\u30fc\u30c9\uff09\u304a\u307e\u3058\u306a\u3044\u3082\u884c\u3044\u307e\u3059\u3002\u30d1\u30b1\u30c3\u30c8\u5206\u5272\u3082\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002</li> <li>\u5e2f\u57df\u5236\u5fa1: Linux\u30ab\u30fc\u30cd\u30eb\u306b\u306ftc\u3068\u3044\u3046\u30b9\u30b0\u30ec\u30e2\u30ce\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001DPDK\u304b\u3089\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067\u3001\u81ea\u4f5c\u3057\u307e\u3059\u3002RFC\u3067\u5b9a\u7fa9\u3055\u308c\u305f\u5e2f\u57df\u5236\u5fa1\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002</li> <li>IPv6: \u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002</li> </ul> <p>\u4f5c\u3089\u306a\u3044\u3082\u306e\uff1aLinux\u306e\u30ab\u30fc\u30cd\u30eb\u3067\u306f\u5f53\u305f\u308a\u524d\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3001\u4ee5\u4e0b\u306e\u6a5f\u80fd\u3082\u5fc5\u9808\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3084\u3084\u3053\u3057\u3044\u306e\u3067\u30ae\u30d6\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002\u3053\u306e\u3078\u3093\u3092Linux\u30ab\u30fc\u30cd\u30eb\u306b\u5b9f\u88c5\u3057\u305f\u4eba\u3005\u3092\u5c0a\u656c\u3057\u3066\u3044\u307e\u3059\u3002</p> <ul> <li>TCP</li> <li>Bonding</li> <li>ACL\u3068\u304b\u3001NS\u3068\u304b\u3001TC\u3068\u304b\u3001\u3082\u308d\u3082\u308d</li> </ul>"},{"location":"dpdk/#pmd","title":"PMD","text":"<p>\u5272\u8fbc\u304c\u767a\u751f\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u5b8c\u5168\u6392\u9664\u3057\u305f\u3001DPDK\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059\u3002\u5171\u6709\u30e1\u30e2\u30ea\u3092\u4ecb\u3057\u3066\u4ed6\u30d7\u30ed\u30b0\u30e9\u30e0\u3084NIC\u3068\u901a\u4fe1\u3057\u307e\u3059\u3002\u307e\u305f\u3001CPU\u306e\u30af\u30ed\u30c3\u30af\u30ec\u30b8\u30b9\u30bf\u3092\u76f4\u63a5\u8aad\u307f\u51fa\u3057\u3066\u3001\u30bf\u30a4\u30df\u30f3\u30b0\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306b\u3001PMD\u306f\u975e\u5e38\u306b\u30a8\u30ad\u30b5\u30a4\u30c6\u30a3\u30f3\u30b0\u306a\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3059\u3002sleep\u3057\u306a\u3044\uff08sleep\u3057\u3066\u3057\u307e\u3046\u3068\u8ab0\u3082\u8d77\u3053\u3057\u3066\u304f\u308c\u306a\u3044\uff09\u306e\u3067\u3001CPU\u4f7f\u7528\u7387\u306f\u5e38\u306b100%\u3068\u306a\u3063\u3066\u307e\u3059\u3002</p>"},{"location":"dpdk/#d","title":"D. \u4eca\u5f8c\u306e\u4e88\u5b9a","text":"<p>Kubernetes\u3067\u3082DPDK\u304c\u6271\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\u30b3\u30f3\u30c6\u30ca\u3092\u7279\u6a29\u30e2\u30fc\u30c9\u3067\u52d5\u304b\u305b\u3070\u3001\u306a\u3093\u3067\u3082\u3067\u304d\u3057\u307e\u3046\u306e\u3067\u3059\u304c\u3001Kubernetes\u306b\u3057\u3063\u304b\u308a\u3068manage\u3055\u308c\u305fVF/DPDK\u30ea\u30bd\u30fc\u30b9\u3092\u6271\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u30fb</p> <ul> <li>VM\u306e\u4eee\u60f3NIC\u3092DPDK\u5bfe\u5fdc\u306b\u3057\u3066\u3001VM\u4e0a\u3067DPDK\u30a2\u30d7\u30ea\u3092\u52d5\u304b\u3059\u3002</li> <li>SR-IOV\u4e0b\u306eVF NIC\u3067\u3001DPDK\u30a2\u30d7\u30ea\u3092\u52d5\u304b\u3059\u3002</li> <li>OpenShift/Kubernetes\u4eee\u60f3NIC\u3092DPDK\u5bfe\u5fdc\u306b\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067DPDK\u30a2\u30d7\u30ea\u3092\u52d5\u304b\u3059\u3002</li> </ul>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/","title":"DPDK20SDK\u3092\u8a66\u3059\u2460","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#_1","title":"\u304d\u3063\u304b\u3051","text":"<p>\u3061\u3087\u3063\u3068DPDK\u95a2\u4fc2\u306e\u4ed5\u4e8b\u304b\u3089\u96e2\u308c\u3066\u3044\u308b\u9593\u306b\u3001DPDK SDK\u304c\u30d0\u30fc\u30b8\u30e7\u30f3\u304c18\u304b\u308920\u3068\u304b21\u306b\u4e0a\u304c\u3063\u3066\u3044\u305f\u3002\u73fe\u6642\u70b9\u3067\u6700\u65b0\u306eLTS\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u3089\u3001\u30d0\u30fc\u30b8\u30e7\u30f318\u3068\u306f\u69d8\u5b50\u304c\u968f\u5206\u5909\u308f\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306e\u30e1\u30e2\u3002</p> <p>\u6ce8\uff1a\u79c1\u306fDPDK\u3067\u904a\u3076\u3068\u304d\u3001\u30af\u30e9\u30c3\u30b7\u30e5\u524d\u63d0\u306eroot\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u3084\u3063\u3066\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u624b\u9806\u3082\u305d\u3046\u306a\u3063\u3066\u307e\u3059\u306e\u3067\u3001\u5341\u5206\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#mesonninja","title":"\u307e\u305aMeson/Ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089","text":"<p>18\u3067\u306fmake\u3067\u30d3\u30eb\u30c9\u3057\u3066\u3044\u305f\u304c\u300120/21\u3067\u306fmake\u3067\u3082cmake\u3067\u3082\u306a\u304f\u3001Meson/Ninja\u306b\u5909\u308f\u3063\u3066\u3044\u305f\u3002</p> <pre><code># yum install python3-pip\n# pip3 install meson ninja --user\n</code></pre> <p>\u3067meson\u3068ninja\u304c/root/.local/bin/\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3067.bash_profile\u306b\u4ee5\u4e0b\u306e\u884c\u3092\u5165\u308c\u3066PATH\u3092\u5f35\u308b\u3002</p> <pre><code>export PATH=$PATH:/root/.local/bin\n</code></pre> <p>\u3053\u308c\u3067meson\u3068ninja\u304c\u5b9f\u884c\u3067\u304d\u308b\u3002</p> <pre><code># meson --version\n0.57.1\n\n# ninja --version\n1.10.0.git.kitware.jobserver-1\n</code></pre>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#dpdk20","title":"DPDK20\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>LTS\uff08long term support\uff09\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5165\u308c\u306a\u3044\u3068\u4f59\u8a08\u306a\u82e6\u52b4\u3092\u3059\u308b\u30cf\u30e1\u306b\u306a\u308b\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u3053\u3053\u304b\u3089LTS\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002</p> <pre><code># cd /home\n# wget https://fast.dpdk.org/rel/dpdk-20.11.1.tar.xz\n# tar xJvf dpdk-20.11.1.tar.xz\n# cd dpdk-stable-20.11.1\n</code></pre> <p>Meson/Ninja\u3067\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002</p> <p>`</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#cd-homedpdk-stable-20111","title":"cd /home/dpdk-stable-20.11.1","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#meson-build","title":"meson build","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#cd-build","title":"cd build","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#ninja","title":"ninja","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#ninja-install","title":"ninja install","text":"<p>` \u4ee5\u4e0a\u3067\u30d3\u30eb\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3002\u6050\u308d\u3057\u304f\u7c21\u5358\u3067\u3057\u305f\u3002/usr/local/bin\u3084 /usr/local/include\u306bSDK\u306e\u5404\u7a2e\u30d5\u30a1\u30a4\u30eb\u304c\u3061\u3083\u3093\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3002</p> <p>`</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#alias-dbusrlocalbindpdk-devbindpy","title":"alias db='/usr/local/bin/dpdk-devbind.py'","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#modprobe-vfio-pci","title":"modprobe vfio-pci","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#modprobe-uio_pci_generic","title":"modprobe uio_pci_generic","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#db-s","title":"db -s","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#network-devices-using-kernel-driver","title":"Network devices using kernel driver","text":"<p>0000:01:00.0 'I211 Gigabit Network Connection 1539' if=enp1s0 drv=igb unused=vfio-pci,uio_pci_generic 0000:02:00.0 'I211 Gigabit Network Connection 1539' if=enp2s0 drv=igb unused=vfio-pci,uio_pci_generic 0000:03:00.0 'I211 Gigabit Network Connection 1539' if=enp3s0 drv=igb unused=vfio-pci,uio_pci_generic 0000:04:00.0 'I211 Gigabit Network Connection 1539' if=enp4s0 drv=igb unused=vfio-pci,uio_pci_generic \uff08\u5f8c\u7565\uff09 ` \u6ce8\uff1adpdk-devbind\u306f\u3001\u983b\u7e41\u306b\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001db\u3068\u30a8\u30ea\u30a2\u30b9\u767b\u9332\u3057\u3066\u3044\u308b\u3002</p> <p>DPDK\u5bfe\u5fdc\u30c9\u30e9\u30a4\u30d0uio_pci_generic\u3084vfio-pci\u3082\u4f7f\u3048\u305d\u3046\u3060\u3002</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A0/#_2","title":"\u6b21\u56de\u4e88\u544a","text":"<p>dpdk-devbind\u3068\u304bDPDK20/21\u306e\u5404\u7a2e\u30c4\u30fc\u30eb\u3092\u8a66\u3057\u3066\u307f\u305f\u3044\u300218\u3068\u3042\u307e\u308a\u5909\u308f\u3089\u306a\u3044\u3068\u601d\u3046\u3051\u3069\u3002</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/","title":"DPDK20SDK\u3092\u8a66\u3059\u2461","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#a","title":"A. \u306f\u3058\u3081\u306b","text":"<p>DPDK18 SDK\u3067\u306fDPDK\u30c9\u30e9\u30a4\u30d0\u3082make\u3057\u3066\u3044\u305f\u304c\u3001DPDK20\u3067\u306fLinux\u6a19\u6e96\u306e\u30c9\u30e9\u30a4\u30d0\u3092\u4f7f\u3046\u306e\u304c\u6a19\u6e96\u307f\u305f\u3044\u3002DPDK18\u3067make\u3055\u308c\u308b\u30c9\u30e9\u30a4\u30d0\uff08igb_uio\uff09\u306f\u52d5\u4f5c\u304c\u5b89\u5b9a\u3057\u3066\u3044\u305f\u304c\u3001Linux\u6a19\u6e96\u30c9\u30e9\u30a4\u30d0\u306f\u3069\u3046\u306a\u306e\u304b\u3061\u3087\u3063\u3068\u4e0d\u5b89\u306a\u3068\u3053\u308d\u3002</p> <p>igb_uio\u306f\u30ab\u30fc\u30cd\u30eb\u304c\u66f4\u65b0\u3055\u308c\u308b\u5ea6\u306bmake\u3057\u76f4\u3059\u304c\u5fc5\u8981\u304c\u3042\u3063\u305f\u304c\u3001Linux\u6a19\u6e96\u306e\u30c9\u30e9\u30a4\u30d0\u3067\u306f\u305d\u306e\u624b\u9593\u304c\u306a\u304f\u306a\u308b\u3068\u3044\u3046\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b\u3002</p> <p>\u3044\u308d\u3044\u308d\u306a\u30c9\u30e9\u30a4\u30d0\u540d\u304c\u51fa\u3066\u304f\u308b\u306e\u3067\u6700\u521d\u306b\u6574\u7406\u3057\u3066\u304a\u304f\u3068\u3002</p> \u30c9\u30e9\u30a4\u30d0\u540d DPDK\u5bfe\u5fdc Linux\u6a19\u6e96 \u5099\u8003 e1000e NO YES \u30a4\u30f3\u30c6\u30eb1G NIC ixgbe NO YES \u30a4\u30f3\u30c6\u30eb10G NIC igb_uio YES NO SDK\u3067make uio_pci_generic YES YES vfio-pci YES YES IOMMU\u5bfe\u5fdc"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#dpdk-devbind","title":"\u300c\u30c9\u30e9\u30a4\u30d0\u4ed8\u3051\u5916\u3057\u300d\u30b3\u30de\u30f3\u30c9 dpdk-devbind \u3092\u4f7f\u3063\u3066\u307f\u308b","text":"<p>dpdk-devbind\u30b3\u30de\u30f3\u30c9\u306f\u3088\u304f\u4f7f\u3046\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306balias\u3067db\u3068\u77ed\u304f\u3057\u3066\u4f7f\u3063\u3066\u3044\u308b\u3002</p> <pre><code>alias db='/usr/local/bin/dpdk-devbind.py'\n</code></pre> <p>DPDK\u30c9\u30e9\u30a4\u30d0\u672a\u767b\u9332\u72b6\u614b\u3067\u3001db\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066\u307f\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002</p> <pre><code># db -s\n\nNetwork devices using kernel driver\n===================================\n0000:00:1f.6 'Ethernet Connection (2) I219-V 15b8' if=eno1 drv=e1000e unused= *Active*\n0000:01:00.0 'Ethernet Controller 10G X550T 1563' if=enp1s0f0 drv=ixgbe unused=\n0000:01:00.1 'Ethernet Controller 10G X550T 1563' if=enp1s0f1 drv=ixgbe unused=\n\uff08\u5f8c\u7565\uff09\n</code></pre> <p>3\u3064\u306eNIC\u30dd\u30fc\u30c8\u306b\u30ab\u30fc\u30cd\u30eb\u6a19\u6e96\u306e\u30c9\u30e9\u30a4\u30d0\uff08e1000e\u3068ixgbe\uff09\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308b\u3002\u3053\u3053\u3067DPDK\u5bfe\u5fdc\u30c9\u30e9\u30a4\u30d0\u3092\u767b\u9332\u3057\u3066\u3001\u518d\u5ea6\u540c\u3058\u30b3\u30de\u30f3\u30c9\u3092\u5165\u308c\u308b\u3068\u3001</p> <pre><code># modprobe uio\n# modprobe uio_pci_generic\n# modprobe vfio-pci\n# db -s\n\nNetwork devices using kernel driver\n===================================\n0000:00:1f.6 'Ethernet Connection (2) I219-V 15b8' if=eno1 drv=e1000e unused=vfio-pci,uio_pci_generic *Active*\n0000:01:00.0 'Ethernet Controller 10G X550T 1563' if=enp1s0f0 drv=ixgbe unused=vfio-pci,uio_pci_generic\n0000:01:00.1 'Ethernet Controller 10G X550T 1563' if=enp1s0f1 drv=ixgbe unused=vfio-pci,uio_pci_generic\n\uff08\u5f8c\u7565\uff09\n</code></pre> <p>3\u3064\u306eNIC\u30dd\u30fc\u30c8\u306b\u300cDKDK\u5bfe\u5fdc\u30c9\u30e9\u30a4\u30d0\u300d\uff08vfio-pci\u3068uio_pci_generic\uff09\u304c\u9069\u7528\u53ef\u80fd\u306a\u3053\u3068\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u6ce8\uff1a\u307e\u3060\u9069\u7528\u3055\u308c\u3066\u306a\u3044\u3002 X550T\u306e2\u3064\u306eNIC\u30dd\u30fc\u30c8\u3092\u30ab\u30fc\u30cd\u30eb\u6a19\u6e96\u30c9\u30e9\u30a4\u30d0\uff08ixgbe\uff09\u304b\u3089DPDK\u5bfe\u5fdc\u7528\uff08uio_pci_generic\uff09\u306b\u4ed8\u3051\u66ff\u3048\u3066\u307f\u308b\u3002</p> <p>`</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#db-b-uio_pci_generic-000001000","title":"db -b uio_pci_generic 0000:01:00.0","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#db-b-uio_pci_generic-000001001","title":"db -b uio_pci_generic 0000:01:00.1","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#db-s","title":"db -s","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#network-devices-using-dpdk-compatible-driver","title":"Network devices using DPDK-compatible driver","text":"<p>0000:01:00.0 'Ethernet Controller 10G X550T 1563' drv=uio_pci_generic unused=ixgbe,vfio-pci 0000:01:00.1 'Ethernet Controller 10G X550T 1563' drv=uio_pci_generic unused=ixgbe,vfio-pci</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#network-devices-using-kernel-driver","title":"Network devices using kernel driver","text":"<p>0000:00:1f.6 'Ethernet Connection (2) I219-V 15b8' if=eno1 drv=e1000e unused=vfio-pci,uio_pci_generic Active \uff08\u5f8c\u7565\uff09 ` nmcli\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bX550T\u306e2\u3064\u306eNIC\u30dd\u30fc\u30c8\u304c\u30ab\u30fc\u30cd\u30eb\u304b\u3089\u898b\u3048\u306a\u304f\u306a\u3063\u3066\u3044\u308b\u3002</p> <p>`</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#nmcli-d","title":"nmcli d","text":"<p>DEVICE       TYPE      STATE      CONNECTION eno1         ethernet  connected  Wired connection 3 lo           loopback  unmanaged  -- ` X550T\u306e2\u3064\u306eNIC\u30dd\u30fc\u30c8\u3092DPDK\u5bfe\u5fdc\u7528\uff08uio_pci_generic\uff09\u304b\u3089\u30ab\u30fc\u30cd\u30eb\u6a19\u6e96\u30c9\u30e9\u30a4\u30d0\uff08ixgbe\uff09\u306b\u623b\u3057\u3066\u307f\u308b\u3002</p> <p>`</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#db-b-ixgbe-000001000","title":"db -b ixgbe 0000:01:00.0","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#db-b-ixgbe-000001001","title":"db -b ixgbe 0000:01:00.1","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#nmcli-d_1","title":"nmcli d","text":"<p>DEVICE       TYPE      STATE         CONNECTION eno1         ethernet  connected     Wired connection 3 enp1s0f0     ethernet  disconnected  -- enp1s0f1     ethernet  unavailable   -- lo           loopback  unmanaged     --</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#db-s_1","title":"db -s","text":""},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#network-devices-using-kernel-driver_1","title":"Network devices using kernel driver","text":"<p>0000:00:1f.6 'Ethernet Connection (2) I219-V 15b8' if=eno1 drv=e1000e unused=vfio-pci,uio_pci_generic Active 0000:01:00.0 'Ethernet Controller 10G X550T 1563' if=enp1s0f0 drv=ixgbe unused=vfio-pci,uio_pci_generic 0000:01:00.1 'Ethernet Controller 10G X550T 1563' if=enp1s0f1 drv=ixgbe unused=vfio-pci,uio_pci_generic \uff08\u5f8c\u7565\uff09 ` \u3082\u3068\u306b\u623b\u3063\u305f\u3002</p>"},{"location":"dpdk/DPDK20SDK%E3%82%92%E8%A9%A6%E3%81%99%E2%91%A1/#_1","title":"\u6b21\u56de\u4e88\u544a","text":"<p>\u6b21\u56de\u306fSR-IOV\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u307f\u305f\u3044\u3002</p>"},{"location":"dpdk/DPDK%E3%82%A2%E3%83%97%E3%83%AA%E7%94%A8%E3%82%A2%E3%83%95%E3%82%A3%E3%83%8B%E3%83%86%E3%82%A3%E8%A8%AD%E5%AE%9AAPI/","title":"DPDK\u30a2\u30d7\u30ea\u7528\u30a2\u30d5\u30a3\u30cb\u30c6\u30a3\u8a2d\u5b9aAPI","text":"<p>PMD\u51e6\u7406\u3092\u884c\u308f\u305b\u308b\u305f\u3081\u306e\u5404\u7a2eAPI\u304cDPDK\u306b\u306f\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002 \u30a2\u30d5\u30a3\u30cb\u30c6\u30a3\u8a2d\u5b9a\u51e6\u7406\u3092\u96a0\u853d\u3059\u308b\u305f\u3081\u306e\u3001\u4fbf\u5229API\u3082\u305f\u304f\u3055\u3093\u7528\u610f\u3055\u308c\u3066\u3044\u3066\u3001\u683c\u597d\u826f\u3044\u306e\u3060\u304c\u3001 \u300c\u5b9f\u969b\u3001\u30b3\u30a2\u3092\u3069\u3046\u5272\u308a\u5f53\u3066\u3066\u3044\u308b\u306e\uff1f\u300d\u3068\u3044\u3046\u7591\u554f\u304c\u6b8b\u308b\u3002\u6975\u7aef\u306a\u4f8b\u3092\u4e0a\u3052\u308b\u3068\u3001</p> <ul> <li>1\u3064\u306e\u30b3\u30a2\u30672\u3064\u306ePMD\u30921:2\u306e\u5272\u5408\u3067\u52d5\u304b\u3057\u305f\u3044\uff08\u666e\u901a\u3084\u3089\u306a\u3044\u3051\u3069\uff09</li> </ul> <p>\u306a\u3069\u306e\u5909\u614b\u52d5\u4f5c\u3092\u30b5\u30dd\u30fc\u30c8\u3067\u304d\u3066\u306a\u3044\u3002</p> <p>\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u30a2\u30d5\u30a3\u30cb\u30c6\u30a3\u8a2d\u5b9a\u306f\u81ea\u529b\u3067\u3084\u308b\u3053\u3068\u306b\u3057\u305f\u3002\u4ee5\u4e0b\u304c\u305d\u306e\u30b3\u30fc\u30c9\u3002\u3059\u3063\u304d\u308a\u3057\u305f\uff01</p> <pre><code>#define _GNU_SOURCE\nvoid *affinity_thread(void *core){\n  //\n  // \u30b9\u30ec\u30c3\u30c9\u306e\u30a2\u30d5\u30a3\u30cb\u30c6\u30a3\u3092\u8a2d\u5b9a\u3057\u3066\n  cpu_set_t mask;  // \u5b9f\u884c\u53ef\u80fd\u306aCPU\u3092\u30d3\u30c3\u30c8\u30de\u30b9\u30af\u3067\u6307\u5b9a\u3059\u308b\n  CPU_ZERO(&amp;mask);  // \u307e\u305a\u30de\u30b9\u30af\u3092\u5168\u90e8\u30aa\u30d5\u306b\u3057\u3066\n  CPU_SET(*(int*)core, &amp;mask);  // \u5b9f\u884c\u3059\u308b\u30b3\u30a2\u756a\u53f7\u3092\u6307\u5b9a\n  if(sched_setaffinity(0, sizeof(mask), &amp;mask) == (-1)){  // \u30a2\u30d5\u30a3\u30cb\u30c6\u30a3\u3092\u8a2d\u5b9a\n    perror(\"setaffinity:\");\n    exit(1);\n  }\n  // PMD\u51e6\u7406\u3092\u884c\u3046\n  int64_t i;\n  for(;;){\n    for(i = 1; i &lt; 0x100000000; i++) ;\n    printf(\"zzz\\n\");\n  }\n}\n\n// \u547c\u3073\u51fa\u3057\u5074\u3002PMD\u306b#4\u306e\u30b3\u30a2\u3092\u5272\u308a\u5f53\u3066\u305f\u4f8b\n  int core4 = 4;\n  ret = pthread_create(&amp;thread1, NULL, affinity_thread, &amp;core4);\n\n</code></pre>"},{"location":"dpdk/centos7-dpdk22-install/","title":"-2 CentOS7","text":"<p>2023/9/5\u66f4\u65b0</p>"},{"location":"dpdk/centos7-dpdk22-install/#centos7dpdk22","title":"CentOS7\u306bDPDK22\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"dpdk/centos7-dpdk22-install/#a","title":"A. \u306f\u3058\u3081\u306b","text":"<p>VirtualBox\u3067\u4f5c\u6210\u3057\u305f\u3001CentOS7.9 VM\u306bDPDK SDK\u306e\u6700\u65b0LTS(22.11.2)\u3092\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\u305d\u306e\u3068\u304d\u306e\u30e1\u30e2\u3067\u3059\u3002</p> <p>\u6ce8\uff1a\u672c\u8a18\u4e8b\u8a18\u8f09\u306e\u64cd\u4f5c\u306froot\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u5341\u5206\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</p>"},{"location":"dpdk/centos7-dpdk22-install/#b","title":"B. \u624b\u9806","text":""},{"location":"dpdk/centos7-dpdk22-install/#b1-python38","title":"B.1 \u307e\u305a\u3001python3.8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>DPDK22\u306fpython3.6\u3067\u306f\u30d3\u30eb\u30c9\u3067\u304d\u305a\u3001python3.7\u4ee5\u964d\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <pre><code># yum install -y centos-release-scl\n# yum install -y rh-python38\n# scl enable rh-python38 bash\n# python3 -V\nPython 3.8.13\n# pip3 -V\npip 19.3.1 from /opt/rh/rh-python38/root/usr/lib/python3.8/site-packages/pip (python 3.8)\n</code></pre>"},{"location":"dpdk/centos7-dpdk22-install/#b2-mesonninja","title":"B.2 \u3064\u3065\u3044\u3066Meson/Ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code># pip3 install pyelftools\n# pip3 install meson ninja\n# meson --version\n1.2.1\n# ninja --version\n1.11.1.git.kitware.jobserver-1\n</code></pre>"},{"location":"dpdk/centos7-dpdk22-install/#b3-dpdk22","title":"B.3 DPDK22\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>LTS\uff08long term support\uff09\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5165\u308c\u306a\u3044\u3068\u4f59\u8a08\u306a\u82e6\u52b4\u3092\u3059\u308b\u30cf\u30e1\u306b\u306a\u308b\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u3053\u3053\u304b\u3089\u6700\u65b0LTS\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <p>\u306a\u304a\u30012023/9/1\u6642\u70b9\u306eLTS\u306f22.11.2\u3068\u306a\u3063\u3066\u3044\u307e\u3059</p> <pre><code># cd /home\n# wget https://fast.dpdk.org/rel/dpdk-22.11.2.tar.xz\n# tar xJvf dpdk-22.11.2.tar.xz\n</code></pre> <p>Meson/Ninja\u3067\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <pre><code># cd dpdk-stable-22.11.2/\n# meson build\n# cd build\n# ninja\n# ninja install\n</code></pre> <p>\u4ee5\u4e0a\u3067\u30d3\u30eb\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3002\u6050\u308d\u3057\u304f\u7c21\u5358\u3067\u3057\u305f(\u6642\u9593\u306f\u304b\u304b\u308a\u307e\u3059)\u3002/usr/local/bin\u3084 /usr/local/include\u306bSDK\u306e\u5404\u7a2e\u30d5\u30a1\u30a4\u30eb\u304c\u3061\u3083\u3093\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <pre><code># modprobe vfio-pci\n# modprobe uio_pci_generic\n# /usr/local/bin/dpdk-devbind.py -s\n\nNetwork devices using kernel driver\n===================================\n0000:00:03.0 '82540EM Gigabit Ethernet Controller 100e' if=enp0s3 drv=e1000 unused=vfio-pci,uio_pci_generic *Active*\n\uff08\u5f8c\u7565\uff09\n</code></pre> <p>DPDK\u5bfe\u5fdc\u30c9\u30e9\u30a4\u30d0uio_pci_generic\u3084vfio-pci\u3082\u4f7f\u3048\u305d\u3046\u3067\u3059\u3002</p>"},{"location":"dpdk/centos7-dpdk22-install/#c","title":"C. \u4eca\u5f8c","text":"<p>dpdk-devbind\u3068\u304bDPDK22\u306e\u5404\u7a2e\u30c4\u30fc\u30eb\u3092\u8a66\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002</p>"},{"location":"dpdk/rhel8-dpdk22-install/","title":"-1 RHEL8","text":"<p>2023/9/5\u66f4\u65b0</p>"},{"location":"dpdk/rhel8-dpdk22-install/#rhel8-dpdk22","title":"RHEL8 \u306bDPDK22\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"dpdk/rhel8-dpdk22-install/#a","title":"A. \u306f\u3058\u3081\u306b","text":"<p>\u6211\u304c\u5bb6\u306eNAT\u30b5\u30fc\u30d0\u3068\u306a\u3063\u3066\u3044\u308b\u3001\u30d9\u30a2\u30e1\u30bf\u30eb\u306eRHEL8.8\u6a5f\u306bDPDK\u5bfe\u5fdc\u306eNIC\uff08Intel I350\uff09\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u3067\u3001DPDK SDK\u306e\u6700\u65b0LTS(22.11.2)\u3092\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\u305d\u306e\u3068\u304d\u306e\u30e1\u30e2\u3067\u3059\u3002</p> <p>\u6ce8\uff1a\u672c\u8a18\u4e8b\u8a18\u8f09\u306e\u64cd\u4f5c\u306froot\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u5341\u5206\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</p> <pre><code># cat /etc/redhat-release\nRed Hat Enterprise Linux release 8.8 (Ootpa)\n# lspci | grep Ethernet\n00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (2) I219-V\n01:00.0 Ethernet controller: Intel Corporation I350 Gigabit Network Connection (rev 01)\n01:00.1 Ethernet controller: Intel Corporation I350 Gigabit Network Connection (rev 01)\n</code></pre>"},{"location":"dpdk/rhel8-dpdk22-install/#b","title":"B. \u624b\u9806","text":""},{"location":"dpdk/rhel8-dpdk22-install/#b1-python38","title":"B.1 \u307e\u305a\u3001python3.8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>DPDK22\u306fpython3.6\u3067\u306f\u30d3\u30eb\u30c9\u3067\u304d\u305a\u3001python3.7\u4ee5\u964d\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <pre><code># python3 -V\nPython 3.6.8\n# yum install python38\n# python3 -V\nPython 3.8.16\n# pip3 -V\npip 19.3.1 from /usr/lib/python3.8/site-packages/pip (python 3.8)\n</code></pre>"},{"location":"dpdk/rhel8-dpdk22-install/#b2-mesonninja","title":"B.2 \u3064\u3065\u3044\u3066Meson/Ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code># pip3 install pyelftools\n# pip3 install meson ninja\n# meson --version\n1.2.1\n# ninja --version\n1.11.1.git.kitware.jobserver-1\n</code></pre>"},{"location":"dpdk/rhel8-dpdk22-install/#b3-dpdk22","title":"B.3 DPDK22\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>LTS\uff08long term support\uff09\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5165\u308c\u306a\u3044\u3068\u4f59\u8a08\u306a\u82e6\u52b4\u3092\u3059\u308b\u30cf\u30e1\u306b\u306a\u308b\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u3053\u3053\u304b\u3089\u6700\u65b0LTS\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <p>\u306a\u304a\u30012023/9/1\u6642\u70b9\u306eLTS\u306f22.11.2\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002</p> <pre><code># cd /home\n# wget https://fast.dpdk.org/rel/dpdk-22.11.2.tar.xz\n# tar xJvf dpdk-22.11.2.tar.xz\n</code></pre> <p>Meson/Ninja\u3067\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <pre><code># cd dpdk-stable-22.11.2/\n# meson build\n# cd build\n# ninja\n# ninja install\n</code></pre> <p>\u4ee5\u4e0a\u3067\u30d3\u30eb\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3002\u6050\u308d\u3057\u304f\u7c21\u5358\u3067\u3057\u305f(\u6642\u9593\u306f\u304b\u304b\u308a\u307e\u3059)\u3002/usr/local/bin\u3084 /usr/local/include\u306bSDK\u306e\u5404\u7a2e\u30d5\u30a1\u30a4\u30eb\u304c\u3061\u3083\u3093\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <pre><code># modprobe vfio-pci\n# modprobe uio_pci_generic\n# /usr/local/bin/dpdk-devbind.py -s\n\nNetwork devices using kernel driver\n===================================\n0000:00:1f.6 'Ethernet Connection (2) I219-V 15b8' if=eno1 drv=e1000e unused=vfio-pci,uio_pci_generic *Active*\n0000:01:00.0 'I350 Gigabit Network Connection 1521' if=enp1s0f0 drv=igb unused=vfio-pci,uio_pci_generic *Active*\n0000:01:00.1 'I350 Gigabit Network Connection 1521' if=enp1s0f1 drv=igb unused=vfio-pci,uio_pci_generic *Active*\n\uff08\u5f8c\u7565\uff09\n</code></pre> <p>DPDK\u5bfe\u5fdc\u30c9\u30e9\u30a4\u30d0\u306evfio-pci\u3084uio_pci_generic\u3082\u4f7f\u3048\u305d\u3046\u3067\u3059\u3002</p>"},{"location":"dpdk/rhel8-dpdk22-install/#c","title":"C. \u4eca\u5f8c","text":"<p>dpdk-devbind\u3068\u304bDPDK22\u306e\u5404\u7a2e\u30c4\u30fc\u30eb\u3092\u8a66\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002</p>"},{"location":"dpdk/rhel8-dpdk22-testpmd/","title":"Rhel8 dpdk22 testpmd","text":"<p>2024/4/28\u66f4\u65b0</p>"},{"location":"dpdk/rhel8-dpdk22-testpmd/#rhel8dpdk22testpmdudp","title":"RHEL8/DPDK22\u306etestpmd\u3067UDP\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3059\u308b","text":""},{"location":"dpdk/rhel8-dpdk22-testpmd/#1","title":"1. \u306f\u3058\u3081\u306b","text":"<p>testpmd\u306b\u3088\u308b\u3001UDP\u9001\u4fe1\u306e\u624b\u9806\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"dpdk/rhel8-dpdk22-testpmd/#2","title":"2. \u624b\u9806","text":""},{"location":"dpdk/rhel8-dpdk22-testpmd/#21-hugepagevfio","title":"2.1 HugePage\u3068VFIO\u306e\u8a2d\u5b9a","text":"<ul> <li>\u3068\u308a\u3042\u3048\u305a\u30012M\u30d0\u30a4\u30c8\u306eHugePage\u3092\u30012048\u9762\u7528\u610f\u3057\u307e\u3059\u3002</li> </ul> <pre><code># echo 2048 &gt; /proc/sys/vm/nr_hugepages\n</code></pre>"},{"location":"dpdk/rhel8-dpdk22-testpmd/#22","title":"2.2 \u30c9\u30e9\u30a4\u30d0\u306e\u4ed8\u3051\u66ff\u3048","text":"<ul> <li>lspci\u3067NIC\u306e\u30c7\u30d0\u30a4\u30b9\u30a2\u30c9\u30ec\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li>\u898b\u3064\u3051\u305fNIC\u3092\u3001<code>nmcli c down</code>\u3067Kernel\u7ba1\u7406\u304b\u3089\u5207\u308a\u96e2\u3057\u307e\u3059\u3002</li> <li>uio_pci_generic\u30c9\u30e9\u30a4\u30d0\u3092\u5145\u3066\u307e\u3059\u3002</li> <li>dpdk-devbind.py\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> </ul> <pre><code># lspci | grep Ethernet\n00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (2) I219-V\n01:00.0 Ethernet controller: Intel Corporation Ethernet Controller X550 (rev 01)\n01:00.1 Ethernet controller: Intel Corporation Ethernet Controller X550 (rev 01) \u2190\u3053\u308c\u3092\u4f7f\u7528\n# nmcli c down enp1s0f1\n# modprobe uio_pci_generic\n# dpdk-devbind.py -b uio_pci_generic 01:00.1\n# dpdk-devbind.py -s\n\nNetwork devices using DPDK-compatible driver\n============================================\n0000:01:00.1 'Ethernet Controller X550 1563' drv=uio_pci_generic unused=ixgbe,vfio-pci \u2190\u3053\u308c\u3092\u4f7f\u7528\n\uff08\u5f8c\u7565\uff09\n</code></pre>"},{"location":"dpdk/rhel8-dpdk22-testpmd/#23","title":"2.3 \u9001\u4fe1\u5148\u60c5\u5831\u306e\u8abf\u67fb","text":"<ul> <li>UDP\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3059\u308b\u306b\u306f\u3001\u76f8\u624b\u306eMAC\u30a2\u30c9\u30ec\u30b9\u3001IP\u30a2\u30c9\u30ec\u30b9\u304c\u5fc5\u8981\u3067\u3059\u3002</li> <li>\u6ce8\uff1a\u9001\u4fe1\u5148\u3068L2\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u7e4b\u304c\u3063\u3066\u3044\u308b\u524d\u63d0\u3067\u3059\u3002</li> <li>\u4eca\u56de\u306e\u30c6\u30b9\u30c8\u74b0\u5883\u3067\u306f\u3001\u76f8\u624b\u5148\u306f\u3001IP\u30a2\u30c9\u30ec\u30b9:192.168.2.111\u3001MAC\u30a2\u30c9\u30ec\u30b9:a0:36:9f:b3:1a:f5\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002</li> </ul> <pre><code>enp1s0f1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.2.111  netmask 255.255.255.0  broadcast 192.168.2.255\n        inet6 fe80::b4c2:e158:3a22:7f19  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether a0:36:9f:b3:1a:f5  txqueuelen 1000  (Ethernet)\n\uff08\u5f8c\u7565\uff09\n</code></pre>"},{"location":"dpdk/rhel8-dpdk22-testpmd/#24-testpmd","title":"2.4 testpmd\u8d77\u52d5","text":"<p>testpmd\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6982\u8981\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002</p> <ul> <li>-a: \u4f7f\u7528\u3059\u308bNIC\u30c7\u30d0\u30a4\u30b9\u306eBDF\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>--forward-mode=txonly: \u9001\u4fe1\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002</li> <li>--tx-ip: \u9001\u4fe1\u5143\u3068\u9001\u4fe1\u5148\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>--tx-udp: \u9001\u4fe1\u5143\u3068\u9001\u4fe1\u5148\u306eUDP\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>--eth-peer: \u9001\u4fe1\u5148\u306eMAC\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>--stats-period: \u9001\u4fe1\u72b6\u6cc1\u3092\u8868\u793a\u3059\u308b\u9593\u9694\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> </ul> <pre><code># dpdk-testpmd -a 0000:01:00.1 -- --forward-mode=txonly --tx-ip=192.168.2.111,192.168.2.123 --tx-udp=5000,5000 --eth-peer=0,a0:36:9f:b3:1c:5d --stats-period=1\n</code></pre> <ul> <li>\u8d77\u52d5\u3059\u308b\u3068\u3001\u9001\u4fe1\u304c\u958b\u59cb\u3055\u308c\u3001\u4ee5\u4e0b\u304c1\u79d2\u5468\u671f\u3067\u8868\u793a\u3055\u308c\u307e\u3059</li> <li>\u300c10G NIC\u300d\u3068\u300c2.5G\u306eL2SW\u300d\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001NIC\u30c7\u30d0\u30a4\u30b9\u306e\u521d\u671f\u5316\u3092\u3061\u3083\u3093\u3068\u3057\u3066\u306a\u3044\u306e\u3067\u3001700Mbos\u3057\u304b\u51fa\u3066\u306a\u3044\u3088\u3046\u3067\u3059\u3002</li> </ul> <pre><code>Port statistics ====================================\n  ######################## NIC statistics for port 0  ########################\n  RX-packets: 26         RX-missed: 0          RX-bytes:  9804\n  RX-errors: 0\n  RX-nombuf:  0\n  TX-packets: 8595304    TX-errors: 0          TX-bytes:  550098844\n\n  Throughput (since last show)\n  Rx-pps:           13          Rx-bps:        51880\n  Tx-pps:      1420506          Tx-bps:    727298816\n  ############################################################################\n</code></pre> <p>CTRL-C\u3067\u7d42\u4e86\u3059\u308b\u3068\u3001\u6700\u7d42\u7684\u306a\u7d71\u8a08\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002PMD\u306b\u3088\u308b\u300c\u5168\u529b\u9001\u4fe1\u300d\u306a\u306e\u3067\u3001\u30c9\u30ed\u30c3\u30d7\u304c\u591a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002</p> <pre><code>Waiting for lcores to finish...\n  ---------------------- Forward statistics for port 0  ----------------------\n  RX-packets: 30             RX-dropped: 0             RX-total: 30\n  TX-packets: 10016425       TX-dropped: 556749345     TX-total: 566765770\n  ----------------------------------------------------------------------------\n\n  +++++++++++++++ Accumulated forward statistics for all ports+++++++++++++++\n  RX-packets: 30             RX-dropped: 0             RX-total: 30\n  TX-packets: 10016425       TX-dropped: 556749345     TX-total: 566765770\n  ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\nDone.\n\nStopping port 0...\nStopping ports...\nDone\n\nShutting down port 0...\nClosing ports...\nPort 0 is closed\nDone\n\nBye...\n</code></pre> <ul> <li>\u76f8\u624b\u5148\u3067tcpdump\u3092\u9332\u3063\u3066\u307f\u307e\u3059\u3002\u304b\u306a\u308a\u5c0f\u3055\u3044UDP\u30d1\u30b1\u30c3\u30c8\u304c\u9001\u3089\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>testpmd\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u3001\u3044\u308d\u3044\u308d\u306aUDP\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> </ul> <pre><code>16:15:18.561939 IP 192.168.2.123.5000 &gt; 192.168.2.111.5000: UDP, length 22\n16:15:18.561939 IP 192.168.2.123.5000 &gt; 192.168.2.111.5000: UDP, length 22\n16:15:18.561939 IP 192.168.2.123.5000 &gt; 192.168.2.111.5000: UDP, length 22\n16:15:18.561939 IP 192.168.2.123.5000 &gt; 192.168.2.111.5000: UDP, length 22\n</code></pre>"},{"location":"dpdk/rhel8-dpdk22-testpmd/#3","title":"3. \u4eca\u5f8c","text":"<p>testpmd\u306b\u3088\u308b\u3001UDP\u53d7\u4fe1\u3092\u7d39\u4ecb\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002</p>"},{"location":"dpdk/ubuntu22-dpdk22-install/","title":"-3 Ubuntu22","text":"<p>2024/4/26\u66f4\u65b0</p>"},{"location":"dpdk/ubuntu22-dpdk22-install/#ubuntu2204-dpdk22","title":"Ubuntu22.04 \u306bDPDK22\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":""},{"location":"dpdk/ubuntu22-dpdk22-install/#a","title":"A. \u306f\u3058\u3081\u306b","text":"<p>\u6211\u304c\u5bb6\u306e\u30d9\u30a2\u30e1\u30bf\u30ebUbuntu22.04\u6a5f\u306bDPDK\u5bfe\u5fdc\u306eNIC\uff08Intel X550\u4ed6\uff09\u304c\u5165\u3063\u3066\u3044\u308b\u306e\u3067\u3001DPDK SDK\u306e\u6700\u65b0LTS(22.11.5)\u3092\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\u305d\u306e\u3068\u304d\u306e\u30e1\u30e2\u3067\u3059\u3002</p> <p>\u6ce8\uff1a\u672c\u8a18\u4e8b\u8a18\u8f09\u306e\u64cd\u4f5c\u306froot\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u5341\u5206\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002</p> <pre><code># cat /etc/issue\nUbuntu 22.04.4 LTS \\n \\l\n\n# lspci | grep Ethernet\n00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (2) I219-V\n01:00.0 Ethernet controller: Intel Corporation Ethernet Controller 10G X550T (rev 01)\n01:00.1 Ethernet controller: Intel Corporation Ethernet Controller 10G X550T (rev 01)\n02:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection\n</code></pre>"},{"location":"dpdk/ubuntu22-dpdk22-install/#b","title":"B. \u624b\u9806","text":""},{"location":"dpdk/ubuntu22-dpdk22-install/#b1-python38","title":"B.1 \u307e\u305a\u3001python3.8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>DPDK22\u306fpython3.6\u3067\u306f\u30d3\u30eb\u30c9\u3067\u304d\u305a\u3001python3.7\u4ee5\u964d\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3059\u3067\u306b3.10\u3068\u306a\u3063\u3066\u307e\u3057\u305f\u3002</p> <pre><code># python3 -V\nPython 3.10.12\n# pip3 --version\npip 22.0.2 from /usr/lib/python3/dist-packages/pip (python 3.10)\n</code></pre>"},{"location":"dpdk/ubuntu22-dpdk22-install/#b2-mesonninja","title":"B.2 \u3064\u3065\u3044\u3066Meson/Ninja\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<pre><code># pip3 install pyelftools\n# pip3 install meson ninja\n# meson --version\n0.61.2\n# ninja --version\n1.11.1.git.kitware.jobserver-1\n</code></pre>"},{"location":"dpdk/ubuntu22-dpdk22-install/#b3-dpdk22","title":"B.3 DPDK22\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb","text":"<p>LTS\uff08long term support\uff09\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5165\u308c\u306a\u3044\u3068\u4f59\u8a08\u306a\u82e6\u52b4\u3092\u3059\u308b\u30cf\u30e1\u306b\u306a\u308b\u306e\u3067\u3001\u3061\u3083\u3093\u3068\u3053\u3053\u304b\u3089\u6700\u65b0LTS\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002</p> <p>\u306a\u304a\u30012024/4/26\u6642\u70b9\u306eLTS\u306f22.11.5\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002</p> <pre><code># cd /home\n# wget https://fast.dpdk.org/rel/dpdk-22.11.5.tar.xz\n# tar xJvf dpdk-22.11.2.tar.xz\n</code></pre> <p>Meson/Ninja\u3067\u30d3\u30eb\u30c9/\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002</p> <pre><code># cd dpdk-stable-22.11.2/\n# meson build\n# cd build\n# ninja\n# ninja install\n</code></pre> <p>\u4ee5\u4e0a\u3067\u30d3\u30eb\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3002\u6050\u308d\u3057\u304f\u7c21\u5358\u3067\u3059(\u6642\u9593\u306f\u304b\u304b\u308a\u307e\u3059)\u3002/usr/local/bin\u3084 /usr/local/include\u306bSDK\u306e\u5404\u7a2e\u30d5\u30a1\u30a4\u30eb\u304c\u3061\u3083\u3093\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <pre><code>root@pc11:/home/dpdk-stable-22.11.5/build# modprobe vfio-pci\nroot@pc11:/home/dpdk-stable-22.11.5/build# modprobe uio_pci_generic\nroot@pc11:/home/dpdk-stable-22.11.5/build# dpdk-devbind.py -s\n\nNetwork devices using kernel driver\n===================================\n0000:00:1f.6 'Ethernet Connection (2) I219-V 15b8' if=eno1 drv=e1000e unused=vfio-pci,uio_pci_generic *Active*\n0000:01:00.0 'Ethernet Controller 10G X550T 1563' if=enp1s0f0 drv=ixgbe unused=vfio-pci,uio_pci_generic *Active*\n0000:01:00.1 'Ethernet Controller 10G X550T 1563' if=enp1s0f1 drv=ixgbe unused=vfio-pci,uio_pci_generic\n0000:02:00.0 '82574L Gigabit Network Connection 10d3' if=enp2s0 drv=e1000e unused=vfio-pci,uio_pci_generic\n\uff08\u5f8c\u7565\uff09\n</code></pre> <p>DPDK\u5bfe\u5fdc\u30c9\u30e9\u30a4\u30d0\u306evfio-pci\u3084uio_pci_generic\u3082\u4f7f\u3048\u305d\u3046\u3067\u3059\u3002</p>"},{"location":"dpdk/ubuntu22-dpdk22-install/#c","title":"C. \u4eca\u5f8c","text":"<p>dpdk-devbind\u3068\u304bDPDK22\u306e\u5404\u7a2e\u30c4\u30fc\u30eb\u3092\u8a66\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3002</p>"},{"location":"dpdk/ubuntu22-dpdk22-testpmd/","title":"-3 Ubuntu22","text":"<p>2024/4/28\u66f4\u65b0</p>"},{"location":"dpdk/ubuntu22-dpdk22-testpmd/#ubuntu2204dpdk22testpmdudp","title":"Ubuntu22.04/DPDK22\u306etestpmd\u3067UDP\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3059\u308b","text":""},{"location":"dpdk/ubuntu22-dpdk22-testpmd/#1","title":"1. \u306f\u3058\u3081\u306b","text":"<p>testpmd\u306b\u3088\u308b\u3001UDP\u9001\u4fe1\u306e\u624b\u9806\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002</p>"},{"location":"dpdk/ubuntu22-dpdk22-testpmd/#2","title":"2. \u624b\u9806","text":""},{"location":"dpdk/ubuntu22-dpdk22-testpmd/#21-hugepagevfio","title":"2.1 HugePage\u3068VFIO\u306e\u8a2d\u5b9a","text":"<ul> <li>\u3068\u308a\u3042\u3048\u305a\u30012M\u30d0\u30a4\u30c8\u306eHugePage\u3092\u30012048\u9762\u7528\u610f\u3057\u307e\u3059\u3002</li> <li>VFIO\u3092UNSAFE-NOIOMMU\u30e2\u30fc\u30c9\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> </ul> <pre><code># echo 2048 &gt; /proc/sys/vm/nr_hugepages\n# echo 1 &gt; /sys/module/vfio/parameters/enable_unsafe_noiommu_mode\n</code></pre>"},{"location":"dpdk/ubuntu22-dpdk22-testpmd/#22","title":"2.2 \u30c9\u30e9\u30a4\u30d0\u306e\u4ed8\u3051\u66ff\u3048","text":"<ul> <li>lspci\u3067NIC\u306e\u30c7\u30d0\u30a4\u30b9\u30a2\u30c9\u30ec\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> <li>\u898b\u3064\u3051\u305fNIC\u3092\u3001<code>nmcli c down</code>\u3067Kernel\u7ba1\u7406\u304b\u3089\u5207\u308a\u96e2\u3057\u307e\u3059\u3002</li> <li>vfio-pci\u30c9\u30e9\u30a4\u30d0\u3092\u5145\u3066\u307e\u3059\u3002</li> <li>dpdk-devbind.py\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> </ul> <pre><code># lspci | grep Ethernet\n00:1f.6 Ethernet controller: Intel Corporation Ethernet Connection (2) I219-V\n01:00.0 Ethernet controller: Intel Corporation Ethernet Controller 10G X550T (rev 01)\n01:00.1 Ethernet controller: Intel Corporation Ethernet Controller 10G X550T (rev 01) \u2190\u3053\u308c\u3092\u4f7f\u3044\u307e\u3059\n02:00.0 Ethernet controller: Intel Corporation 82574L Gigabit Network Connection\n# nmcli c down enp1s0f1\n# dpdk-devbind.py -b vfio-pci 01:00.1\n# dpdk-devbind.py -s\n\nNetwork devices using DPDK-compatible driver\n============================================\n0000:01:00.1 'Ethernet Controller 10G X550T 1563' drv=vfio-pci unused=ixgbe,uio_pci_generic\n\uff08\u5f8c\u7565\uff09\n</code></pre>"},{"location":"dpdk/ubuntu22-dpdk22-testpmd/#23","title":"2.3 \u9001\u4fe1\u5148\u60c5\u5831\u306e\u8abf\u67fb","text":"<ul> <li>UDP\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3059\u308b\u306b\u306f\u3001\u76f8\u624b\u306eMAC\u30a2\u30c9\u30ec\u30b9\u3001IP\u30a2\u30c9\u30ec\u30b9\u304c\u5fc5\u8981\u3067\u3059\u3002</li> <li>\u6ce8\uff1a\u9001\u4fe1\u5148\u3068L2\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u7e4b\u304c\u3063\u3066\u3044\u308b\u524d\u63d0\u3067\u3059\u3002</li> <li>\u4eca\u56de\u306e\u30c6\u30b9\u30c8\u74b0\u5883\u3067\u306f\u3001\u76f8\u624b\u5148\u306f\u3001MAC\u30a2\u30c9\u30ec\u30b9:192.168.2.123\u3001IP\u30a2\u30c9\u30ec\u30b9:a0:36:9f:b3:1c:5d\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002</li> </ul> <pre><code>enp1s0f1: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.2.123  netmask 255.255.255.0  broadcast 192.168.2.255\n        ether a0:36:9f:b3:1c:5d  txqueuelen 1000  (Ethernet)\n\uff08\u5f8c\u7565\uff09\n</code></pre>"},{"location":"dpdk/ubuntu22-dpdk22-testpmd/#24-testpmd","title":"2.4 testpmd\u8d77\u52d5","text":"<p>testpmd\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6982\u8981\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002</p> <ul> <li>-a: \u4f7f\u7528\u3059\u308bNIC\u30c7\u30d0\u30a4\u30b9\u306eBDF\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>--forward-mode=txonly: \u9001\u4fe1\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002</li> <li>--tx-ip: \u9001\u4fe1\u5143\u3068\u9001\u4fe1\u5148\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>--tx-udp: \u9001\u4fe1\u5143\u3068\u9001\u4fe1\u5148\u306eUDP\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>--eth-peer: \u9001\u4fe1\u5148\u306eMAC\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> <li>--stats-preriod: \u9001\u4fe1\u72b6\u6cc1\u3092\u8868\u793a\u3059\u308b\u9593\u9694\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> </ul> <pre><code># dpdk-testpmd -a 0000:01:00.1 -- --forward-mode=txonly --tx-ip=192.168.2.111,192.168.2.123 --tx-udp=5000,5000 --eth-peer=0,a0:36:9f:b3:1c:5d --stats-preriod 1\n</code></pre> <ul> <li>\u8d77\u52d5\u3059\u308b\u3068\u3001\u9001\u4fe1\u304c\u958b\u59cb\u3055\u308c\u3001\u4ee5\u4e0b\u304c1\u79d2\u5468\u671f\u3067\u8868\u793a\u3055\u308c\u307e\u3059</li> <li>\u300c10G NIC\u300d\u3068\u300c2.5G\u306eL2SW\u300d\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001NIC\u30c7\u30d0\u30a4\u30b9\u306e\u521d\u671f\u5316\u3092\u3061\u3083\u3093\u3068\u3057\u3066\u306a\u3044\u306e\u3067\u3001700Mbos\u3057\u304b\u51fa\u3066\u306a\u3044\u3088\u3046\u3067\u3059\u3002</li> </ul> <pre><code>Port statistics ====================================\n  ######################## NIC statistics for port 0  ########################\n  RX-packets: 77         RX-missed: 0          RX-bytes:  25588\n  RX-errors: 0\n  RX-nombuf:  0\n  TX-packets: 49730880   TX-errors: 0          TX-bytes:  3182775776\n\n  Throughput (since last show)\n  Rx-pps:            0          Rx-bps:            0\n  Tx-pps:      1420507          Tx-bps:    727300160\n  ############################################################################\n</code></pre> <p>CTRL-C\u3067\u7d42\u4e86\u3059\u308b\u3068\u3001\u6700\u7d42\u7684\u306a\u7d71\u8a08\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002PMD\u306b\u3088\u308b\u300c\u5168\u529b\u9001\u4fe1\u300d\u306a\u306e\u3067\u3001\u30c9\u30ed\u30c3\u30d7\u304c\u591a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002</p> <pre><code>\n  ---------------------- Forward statistics for port 0  ----------------------\n  RX-packets: 77             RX-dropped: 0             RX-total: 77\n  TX-packets: 51152078       TX-dropped: 3250595457    TX-total: 3301747535\n  ----------------------------------------------------------------------------\n\n  +++++++++++++++ Accumulated forward statistics for all ports+++++++++++++++\n  RX-packets: 77             RX-dropped: 0             RX-total: 77\n  TX-packets: 51152078       TX-dropped: 3250595457    TX-total: 3301747535\n  ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n\nDone.\n\nStopping port 0...\nStopping ports...\nDone\n</code></pre> <ul> <li>\u76f8\u624b\u5148\u3067tcpdump\u3092\u9332\u3063\u3066\u307f\u307e\u3059\u3002\u304b\u306a\u308a\u5c0f\u3055\u3044UDP\u30d1\u30b1\u30c3\u30c8\u304c\u9001\u3089\u308c\u3066\u3044\u307e\u3059\u3002</li> <li>testpmd\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u3001\u3044\u308d\u3044\u308d\u306aUDP\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002</li> </ul> <pre><code>14:44:45.081049 IP 192.168.2.111.commplex-main &gt; 192.168.2.123.commplex-main: UDP, length 22\n14:44:45.081050 IP 192.168.2.111.commplex-main &gt; 192.168.2.123.commplex-main: UDP, length 22\n14:44:45.081050 IP 192.168.2.111.commplex-main &gt; 192.168.2.123.commplex-main: UDP, length 22\n14:44:45.081051 IP 192.168.2.111.commplex-main &gt; 192.168.2.123.commplex-main: UDP, length 22\n</code></pre>"},{"location":"dpdk/ubuntu22-dpdk22-testpmd/#3","title":"3. \u4eca\u5f8c","text":"<p>testpmd\u306b\u3088\u308b\u3001UDP\u53d7\u4fe1\u3092\u7d39\u4ecb\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002</p>"},{"location":"linux/","title":"Index","text":"<p>2023/9/5\u66f4\u65b0</p> <p>\u300cA. Linux\u7de8\u300d\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u306eLinux\u306b\u3064\u3044\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3001\u8a2d\u5b9a\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <ul> <li>CentOS7\u3010A-1\u3011</li> <li>RedHat Enterprise Linux (RHEL) 8\u3010A-2\u3011</li> <li>Ubuntu 18\u301c22\u3010A-3\u3011</li> </ul> <p>\u307e\u305f\u672c\u7de8\u3067\u306f\u3001\u4ee5\u4e0b\u306eLinux\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6280\u8853\u306b\u3064\u3044\u3066\u3082\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3001\u8a2d\u5b9a\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <ul> <li>Boot: PXE\u7b49\u3010A-11\u3011</li> <li>DPDK\u3010A-12\u3011</li> <li>Sensor\u3010A-13\u3011</li> <li>\u305d\u306e\u4ed6</li> </ul>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/","title":"IPv6\u7121\u52b9\u5316\u65b9\u6cd5","text":""},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#1","title":"1. \u6982\u8981","text":"<p>IPv6\u3092\u5c0e\u5165\u3057\u305f\u304f\u3066\u3082\u5c0e\u5165\u3067\u304d\u306a\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u74b0\u5883\u304c\u3042\u308a\u307e\u3059\u3002 \u3053\u306e\u3088\u3046\u306a\u74b0\u5883\u3067\u3046\u3063\u304b\u308aCentOS\u3084RHEL\u306eIPv6\u3092\u6709\u52b9\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u3001yum\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u306e\u30d5\u30ea\u30fc\u30ba\u7b49\u304c\u767a\u751f\u3057\u307e\u3059\u3002 \u672c\u7a3f\u3067\u306f\u3001CentOS7.9\u3068RHEL8.7\u3067\u3001IPv6\u7121\u52b9\u5316\u306e\u65b9\u6cd5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#2","title":"2. \u89e3\u6c7a\u3057\u305f\u3044\u8ab2\u984c","text":"<p>CentOS7.9\u3068RHEL8.7\u3067\u3001IPv6\u7121\u52b9\u5316\u306e\u65b9\u6cd5\u304c\u7570\u306a\u308b\u306e\u3067\u3001\u305d\u306e\u5dee\u7570\u3092\u6574\u7406\u3057\u307e\u3059\u3002</p>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#3","title":"3. \u89e3\u6c7a\u65b9\u6cd5","text":""},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#31-centos79ipv6","title":"3.1 CentOS7.9\u3067\u3001IPv6\u3092\u7121\u52b9\u5316\u3059\u308b","text":"<p><code>/etc/sysctl.d/disable_ipv6.conf</code>\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002</p> <pre><code># cat /etc/redhat-release\nCentOS Linux release 7.9.2009 (Core)\n# cat /etc/sysctl.d/disable_ipv6.conf\nnet.ipv6.conf.all.disable_ipv6 = 1\nnet.ipv6.conf.default.disable_ipv6 = 1\n# sysctl -p /etc/sysctl.d/disable_ipv6.conf\nnet.ipv6.conf.all.disable_ipv6 = 1\nnet.ipv6.conf.default.disable_ipv6 = 1\n</code></pre>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#32-rhel87ipv6","title":"3.2 RHEL8.7\u3067\u3001IPv6\u3092\u7121\u52b9\u5316\u3059\u308b","text":"<p><code>nmcli</code>\u3067\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u6bce\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002</p> <pre><code># cat /etc/redhat-release\nRed Hat Enterprise Linux release 8.7 (Ootpa)\n# nmcli c mod eno1 ipv6.method disabled\n</code></pre>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#4","title":"4. \u985e\u4f3c\u306e\u89e3\u6c7a\u65b9\u6cd5","text":"<p>N/A</p>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#5","title":"5. \u4eca\u5f8c\u306e\u8ffd\u8a18\u4e88\u5b9a","text":"<p>N/A</p>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#6","title":"6. \u95a2\u9023\u8a18\u4e8b","text":"<p>N/A</p>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#7","title":"7.\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9","text":"<p>N/A</p>"},{"location":"linux/IPv6%E7%84%A1%E5%8A%B9%E5%8C%96%E6%96%B9%E6%B3%95/#8","title":"8. \u4ed8\u9332","text":"<p>N/A</p>"},{"location":"linux/grub2-mkconfig/","title":"Grub2 mkconfig","text":""},{"location":"linux/grub2-mkconfig/#1","title":"1. \u6982\u8981","text":"<p>CentOS7\u3067<code>/etc/default/grub</code>\u3092\u5909\u66f4\u3057\u305f\u3068\u304d\u306e\u3001\u30ab\u30fc\u30cd\u30eb\u3078\u306e\u53cd\u6620\u65b9\u6cd5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"linux/grub2-mkconfig/#2","title":"2. \u89e3\u6c7a\u3057\u305f\u3044\u8ab2\u984c","text":"<p><code>/etc/default/grub</code>\u3092\u5909\u66f4\u3057\u305f\u3068\u304d\u3001BIOS\u30d6\u30fc\u30c8\u3068UEFI\u30d6\u30fc\u30c8\u3067\u3001\u30ab\u30fc\u30cd\u30eb\u3078\u306e\u53cd\u6620\u65b9\u6cd5\u304c\u7570\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"linux/grub2-mkconfig/#3","title":"3. \u89e3\u6c7a\u65b9\u6cd5","text":"<p>\u307e\u305a\u3001BIOS\u3001UEFI\u3069\u3061\u3089\u3067\u30d6\u30fc\u30c8\u3057\u305f\u306e\u304b\u3092\u78ba\u8a8d\u3057\u3001\u5bfe\u5fdc\u3059\u308b\u53cd\u6620\u65b9\u6cd5\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002</p>"},{"location":"linux/grub2-mkconfig/#31-biosuefi","title":"3.1 BIOS\u3001UEFI\u3069\u3061\u3089\u3067\u30d6\u30fc\u30c8\u3057\u305f\u306e\u304b\u3092\u78ba\u8a8d","text":"<p>BIOS\u30d6\u30fc\u30c8\u3057\u305f\u30de\u30b7\u30f3\u3067\u306e\u5b9f\u884c\u7d50\u679c</p> <pre><code># [ -d /sys/firmware/efi ] &amp;&amp; echo UEFI Booted || echo BIOS Booted\nBIOS Booted\n#\n</code></pre> <p>UEFI\u30d6\u30fc\u30c8\u3057\u305f\u30de\u30b7\u30f3\u3067\u306e\u5b9f\u884c\u7d50\u679c</p> <pre><code># [ -d /sys/firmware/efi ] &amp;&amp; echo UEFI Booted || echo BIOS Booted\nUEFI Booted\n#\n</code></pre>"},{"location":"linux/grub2-mkconfig/#32-bios","title":"3.2 BIOS\u30d6\u30fc\u30c8\u3055\u308c\u305f\u30de\u30b7\u30f3\u3078\u306e\u30ab\u30fc\u30cd\u30eb\u3078\u306e\u53cd\u6620\u65b9\u6cd5","text":"<pre><code># grub2-mkconfig -o /boot/grub2/grub.cfg\nGenerating grub configuration file ...\nFound linux image: /boot/vmlinuz-3.10.0-1160.71.1.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-1160.71.1.el7.x86_64.img\nFound linux image: /boot/vmlinuz-3.10.0-1160.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-1160.el7.x86_64.img\nFound linux image: /boot/vmlinuz-0-rescue-74d201337f7d4c1884bd9f5a09840ab9\nFound initrd image: /boot/initramfs-0-rescue-74d201337f7d4c1884bd9f5a09840ab9.img\ndone\n#\n</code></pre>"},{"location":"linux/grub2-mkconfig/#33-uefi","title":"3.3 UEFI\u30d6\u30fc\u30c8\u3055\u308c\u305f\u30de\u30b7\u30f3\u3078\u306e\u30ab\u30fc\u30cd\u30eb\u3078\u306e\u53cd\u6620\u65b9\u6cd5","text":"<pre><code># grub2-mkconfig -o /boot/efi/EFI/centos/grub.cfg\nGenerating grub configuration file ...\nFound linux image: /boot/vmlinuz-3.10.0-1160.71.1.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-1160.71.1.el7.x86_64.img\nFound linux image: /boot/vmlinuz-3.10.0-1160.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-1160.el7.x86_64.img\nFound linux image: /boot/vmlinuz-0-rescue-74d201337f7d4c1884bd9f5a09840ab9\nFound initrd image: /boot/initramfs-0-rescue-74d201337f7d4c1884bd9f5a09840ab9.img\ndone\n#\n</code></pre>"},{"location":"linux/grub2-mkconfig/#4","title":"4. \u985e\u4f3c\u306e\u89e3\u6c7a\u65b9\u6cd5","text":""},{"location":"linux/grub2-mkconfig/#5","title":"5. \u73fe\u5728\u3068\u4eca\u5f8c","text":""},{"location":"linux/grub2-mkconfig/#6","title":"6. \u95a2\u9023\u8a18\u4e8b","text":""},{"location":"linux/grub2-mkconfig/#7","title":"7.\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9","text":""},{"location":"linux/grub2-mkconfig/#8","title":"8. \u4ed8\u9332","text":"<p><code>/etc/default/grub</code>\u306e\u8a18\u8ff0\u4f8b\u3067\u3059\u3002\u305d\u306e\u307e\u307e\u4f7f\u7528\u3057\u306a\u3044\u3067\u304f\u3060\u3055\u3044\u3002\u30de\u30b7\u30f3\u304c\u8d77\u52d5\u3057\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002</p>"},{"location":"linux/grub2-mkconfig/#i350sriov","title":"I350\u306eSRIOV\u306e\u6709\u52b9\u5316\u4f8b","text":"<pre><code>GRUB_TIMEOUT=5\nGRUB_DISTRIBUTOR=\"$(sed 's, release .*$,,g' /etc/system-release)\"\nGRUB_DEFAULT=saved\nGRUB_DISABLE_SUBMENU=true\nGRUB_TERMINAL_OUTPUT=\"console\"\nGRUB_CMDLINE_LINUX=\"crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet hugepagesz=2M hugepages=8192 iommu=pt intel_iommu=on pci=assign-busses pci=realloc=on\"\nGRUB_DISABLE_RECOVERY=\"true\"\n</code></pre>"},{"location":"linux/grub2-mkconfig/#x550sriov","title":"X550\u306eSRIOV\u306e\u6709\u52b9\u5316\u4f8b","text":"<pre><code>GRUB_TIMEOUT=5\nGRUB_DISTRIBUTOR=\"$(sed 's, release .*$,,g' /etc/system-release)\"\nGRUB_DEFAULT=saved\nGRUB_DISABLE_SUBMENU=true\nGRUB_TERMINAL_OUTPUT=\"console\"\nGRUB_CMDLINE_LINUX=\"crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet hugepagesz=2M hugepages=8192 intel_iommu=on intel_iommu=on pci=assign-busses pci=realloc=on\"\nGRUB_DISABLE_RECOVERY=\"true\"\n</code></pre>"},{"location":"linux/grub2-mkconfig/#1g-hugepage","title":"1G HugePage\u3092\u4f5c\u308b","text":"<pre><code>GRUB_TIMEOUT=5\nGRUB_DISTRIBUTOR=\"$(sed 's, release .*$,,g' /etc/system-release)\"\nGRUB_DEFAULT=saved\nGRUB_DISABLE_SUBMENU=true\nGRUB_TERMINAL_OUTPUT=\"console\"\nGRUB_CMDLINE_LINUX=\"crashkernel=auto spectre_v2=retpoline rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet default_hugepagesz=1G hugepagesz=1G hugepages=4 hugepagesz=2M hugepages=1024\"\nGRUB_DISABLE_RECOVERY=\"true\"\n</code></pre>"},{"location":"linux/ipv6-setting/","title":"Ipv6 setting","text":"<p>2023/9/9\u66f4\u65b0</p>"},{"location":"linux/ipv6-setting/#a","title":"A. \u6982\u8981","text":"<p>IPv6\u3092\u5c0e\u5165\u3057\u305f\u304f\u3066\u3082\u5c0e\u5165\u3067\u304d\u306a\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u74b0\u5883\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u74b0\u5883\u3067\u3046\u3063\u304b\u308aIPv6\u3092\u6709\u52b9\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u3001yum\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u30d5\u30ea\u30fc\u30ba\u7b49\u3059\u308b\u306a\u3069\u306e\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3059\u3002\u672c\u7a3f\u3067\u306f\u3001CentOS7.9\u3001RHEL8.8\u3001Ubuntu22\u74b0\u5883\u3067\u306e\u3001IPv6\u7121\u52b9\u5316/\u518d\u6709\u52b9\u5316\u306e\u65b9\u6cd5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"linux/ipv6-setting/#b","title":"B. \u89e3\u6c7a\u3057\u305f\u3044\u8ab2\u984c","text":"<p>CentOS7.9\u3001RHEL8.8\u3001Ubuntu22\u74b0\u5883\u3067\u3001IPv6\u7121\u52b9\u5316/\u518d\u6709\u52b9\u5316\u3057\u305f\u3044\u3002</p>"},{"location":"linux/ipv6-setting/#c","title":"C. \u89e3\u6c7a\u65b9\u6cd5","text":"<p>CentOS7.9\u3001RHEL8.8\u3001Ubuntu22\u306e\u9806\u306b\u3001\u305d\u308c\u305e\u308c\u3001IPv6\u306e\u3001\u2500\u2500\u2460\u8a2d\u5b9a\u72b6\u614b\u306e\u78ba\u8a8d\u3001\u2461\u7121\u52b9\u5316\u8a2d\u5b9a\u3001\u2462\u7121\u52b9\u5316\u5f8c\u306e\u78ba\u8a8d\u3001\u2463\u518d\u6709\u52b9\u5316\u8a2d\u5b9a\u3001\u2464\u518d\u6709\u52b9\u5316\u5f8c\u306e\u78ba\u8a8d\u2500\u2500\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"linux/ipv6-setting/#c1-centos79ipv6","title":"C.1 CentOS7.9\u3067\u3001IPv6\u3092\u7121\u52b9\u5316/\u518d\u6709\u52b9\u5316\u3059\u308b","text":"<ul> <li>enp0s3\u304c\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u629c\u3051\u3066\u3044\u3051\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6","title":"\u73fe\u5728\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># cat /etc/redhat-release\nCentOS Linux release 7.9.2009 (Core)\n# ifconfig enp0s3\nenp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.43  netmask 255.255.255.0  broadcast 192.168.1.255\n        inet6 240d:1a:b86:e800:443a:d3fa:1644:e55b  prefixlen 64  scopeid 0x0&lt;global&gt;\n        inet6 fe80::777f:d335:e009:c9e0  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 08:00:27:aa:80:99  txqueuelen 1000  (Ethernet)\n        RX packets 6425  bytes 8944887 (8.5 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 555  bytes 52301 (51.0 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n# route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         192.168.0.1     0.0.0.0         UG    100    0        0 enp0s3\n192.168.1.0     0.0.0.0         255.255.255.0   U     100    0        0 enp0s3\n\uff08\u95a2\u4fc2\u90e8\u5206\u306e\u307f\u629c\u7c8b\uff09\n</code></pre> <ul> <li>inet\u306b\u3082\u3001inet6\u306b\u3082\u30a2\u30c9\u30ec\u30b9\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_1","title":"\u73fe\u5728\u306eIPv6\u8a2d\u5b9a\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ping -c 3 -4 google.com\nPING google.com (142.250.196.142) 56(84) bytes of data.\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=1 ttl=116 time=5.16 ms\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=2 ttl=116 time=4.38 ms\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=3 ttl=116 time=4.04 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2004ms\nrtt min/avg/max/mdev = 4.044/4.528/5.162/0.474 ms\n# ping -c 3 -6 google.com\nPING google.com(nrt12s28-in-x0e.1e100.net (2404:6800:4004:810::200e)) 56 data bytes\n64 bytes from nrt12s28-in-x0e.1e100.net (2404:6800:4004:810::200e): icmp_seq=1 ttl=116 time=5.35 ms\n64 bytes from nrt12s28-in-x0e.1e100.net (2404:6800:4004:810::200e): icmp_seq=2 ttl=116 time=4.46 ms\n64 bytes from nrt12s28-in-x0e.1e100.net (2404:6800:4004:810::200e): icmp_seq=3 ttl=116 time=4.39 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2003ms\nrtt min/avg/max/mdev = 4.396/4.737/5.352/0.439 ms\n</code></pre> <ul> <li>IPv4\u3001IPv6\u3068\u3082\u306bping\u304c\u5c4a\u304d\u307e\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_2","title":"IPv6\u3092\u7121\u52b9\u5316\u3057\u307e\u3059","text":"<pre><code># nmcli c mod enp1s0f0 ipv6.method ignore\n# systemctl restart NetworkManager\n</code></pre>"},{"location":"linux/ipv6-setting/#ipv6_3","title":"\u7121\u52b9\u5316\u5f8c\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ifconfig enp0s3\nenp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.43  netmask 255.255.255.0  broadcast 192.168.1.255\n        inet6 fe80::a00:27ff:feaa:8099  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 08:00:27:aa:80:99  txqueuelen 1000  (Ethernet)\n        RX packets 6763  bytes 8973062 (8.5 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 741  bytes 74573 (72.8 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <ul> <li>inet6\u306e\u8a2d\u5b9a\u306f\u6b8b\u3063\u3066\u3044\u307e\u3059\uff08\u3061\u3087\u3063\u3068\u7d1b\u3089\u308f\u3057\u3044\u3067\u3059\uff09</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_4","title":"\u7121\u52b9\u5316\u5f8c\u306eIPv6\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ping -c 3 -4 google.com\nPING google.com (142.250.196.110) 56(84) bytes of data.\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=1 ttl=116 time=3.90 ms\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=2 ttl=116 time=4.57 ms\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=3 ttl=116 time=4.42 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2005ms\nrtt min/avg/max/mdev = 3.906/4.302/4.574/0.291 ms\n# ping -c 3 -6 google.com\nconnect: \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u5c4a\u304d\u307e\u305b\u3093\n</code></pre> <ul> <li>IPv6\u306eping\u304c\u758e\u901a\u3057\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_5","title":"IPv6\u3092\u518d\u6709\u52b9\u5316\u3057\u307e\u3059","text":"<pre><code># nmcli c mod enp1s0f0 ipv6.method auto\n# systemctl restart NetworkManager\n</code></pre> <ul> <li>IPv6\u306e\u30a2\u30c9\u30ec\u30b9\u306e\u53d6\u5f97/\u8a2d\u5b9a\u65b9\u6cd5\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4e0a\u4f8b\u306f\u300c\u81ea\u52d5\u8a2d\u5b9a\u300d\u3067\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_6","title":"\u518d\u6709\u52b9\u5316\u5f8c\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ifconfig enp0s3\nenp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.43  netmask 255.255.255.0  broadcast 192.168.1.255\n        inet6 240d:1a:b86:e800:443a:d3fa:1644:e55b  prefixlen 64  scopeid 0x0&lt;global&gt;\n        inet6 fe80::a00:27ff:feaa:8099  prefixlen 64  scopeid 0x20&lt;link&gt;\n        ether 08:00:27:aa:80:99  txqueuelen 1000  (Ethernet)\n        RX packets 7212  bytes 9008616 (8.5 MiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 1023  bytes 103714 (101.2 KiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <ul> <li><code>inet6</code>\u306e\u5909\u5316\u304c\u306a\u3044\u306e\u3067\u3001ifconfig\u3067\u306f\u6709\u52b9/\u7121\u52b9\u304c\u5206\u304b\u308a\u307e\u305b\u3093\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_7","title":"\u518d\u6709\u52b9\u5316\u5f8c\u306eIPv6\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ping -c 3 -4 google.com\nPING google.com (142.250.196.110) 56(84) bytes of data.\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=1 ttl=116 time=3.92 ms\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=2 ttl=116 time=4.23 ms\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=3 ttl=116 time=4.16 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2004ms\nrtt min/avg/max/mdev = 3.920/4.104/4.234/0.153 ms\n# ping -c 3 -6 google.com\nPING google.com(nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e)) 56 data bytes\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=1 ttl=58 time=5.82 ms\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=2 ttl=58 time=4.59 ms\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=3 ttl=58 time=4.44 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2005ms\nrtt min/avg/max/mdev = 4.443/4.951/5.822/0.623 ms\n</code></pre> <ul> <li>IPv4\u3001IPv6\u3068\u3082\u306bping\u304c\u5c4a\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#c2-rhel88ipv6","title":"C.2 RHEL8.8\u3067\u3001IPv6\u3092\u7121\u52b9\u5316/\u518d\u6709\u52b9\u5316\u3059\u308b","text":"<ul> <li>enp1s0f0\u304c\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u629c\u3051\u3066\u3044\u3051\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u3059</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_8","title":"\u73fe\u5728\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># cat /etc/redhat-release\nRed Hat Enterprise Linux release 8.8 (Ootpa)\n# ifconfig enp1s0f0\nenp1s0f0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.123  netmask 255.255.255.0  broadcast 192.168.1.255\n        inet6 fe80::a236:9fff:fe8e:41b4  prefixlen 64  scopeid 0x20&lt;link&gt;\n        inet6 240d:1a:b86:e800:a236:9fff:fe8e:41b4  prefixlen 64  scopeid 0x0&lt;global&gt;\n        ether a0:36:9f:8e:41:b4  txqueuelen 1000  (Ethernet)\n        RX packets 1488726  bytes 1568795131 (1.4 GiB)\n        RX errors 0  dropped 20  overruns 0  frame 0\n        TX packets 566324  bytes 191670708 (182.7 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device memory 0xdf100000-df1fffff\n# route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         192.168.1.1     0.0.0.0         UG    101    0        0 enp1s0f0\n192.168.1.0     0.0.0.0         255.255.255.0   U     101    0        0 enp1s0f0\n\uff08\u95a2\u4fc2\u90e8\u5206\u306e\u307f\u629c\u7c8b\uff09\n</code></pre> <ul> <li>inet\u306b\u3082\u3001inet6\u306b\u3082\u30a2\u30c9\u30ec\u30b9\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_9","title":"\u73fe\u5728\u306eIPv6\u8a2d\u5b9a\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ping -c 3 -4 google.com\nPING google.com (142.250.196.142) 56(84) bytes of data.\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=1 ttl=117 time=3.19 ms\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=2 ttl=117 time=3.46 ms\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=3 ttl=117 time=3.23 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2002ms\nrtt min/avg/max/mdev = 3.194/3.293/3.455/0.132 ms\n[root@pc23 ~]# ping -c 3 -6 google.com\nPING google.com(nrt12s36-in-x0e.1e100.net (2404:6800:4004:822::200e)) 56 data bytes\n64 bytes from nrt12s36-in-x0e.1e100.net (2404:6800:4004:822::200e): icmp_seq=1 ttl=58 time=4.32 ms\n64 bytes from nrt12s36-in-x0e.1e100.net (2404:6800:4004:822::200e): icmp_seq=2 ttl=58 time=3.58 ms\n64 bytes from nrt12s36-in-x0e.1e100.net (2404:6800:4004:822::200e): icmp_seq=3 ttl=58 time=3.65 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2004ms\nrtt min/avg/max/mdev = 3.578/3.847/4.320/0.342 ms\n</code></pre> <ul> <li>IPv4\u3001IPv6\u3068\u3082\u306bping\u304c\u5c4a\u304d\u307e\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_10","title":"IPv6\u3092\u7121\u52b9\u5316\u3057\u307e\u3059","text":"<pre><code># nmcli c mod enp1s0f0 ipv6.method disable\n# systemctl restart NetworkManager\n</code></pre> <ul> <li><code>ipv6.method disable</code>\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u306a\u3044\u53e4\u3044RHEL8.X\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001<code>ipv6.method ignore</code>\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_11","title":"\u7121\u52b9\u5316\u5f8c\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ifconfig enp1s0f0\nenp1s0f0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.123  netmask 255.255.255.0  broadcast 192.168.1.255\n        ether a0:36:9f:8e:41:b4  txqueuelen 1000  (Ethernet)\n        RX packets 1496291  bytes 1570491500 (1.4 GiB)\n        RX errors 0  dropped 21  overruns 0  frame 0\n        TX packets 572846  bytes 192855030 (183.9 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device memory 0xdf100000-df1fffff\n</code></pre> <ul> <li>inet6\u306e\u8a2d\u5b9a\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_12","title":"\u7121\u52b9\u5316\u5f8c\u306eIPv6\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ping -c 3 -4 google.com\nPING google.com (142.250.196.110) 56(84) bytes of data.\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=1 ttl=117 time=3.30 ms\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=2 ttl=117 time=3.20 ms\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=3 ttl=117 time=3.11 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2003ms\nrtt min/avg/max/mdev = 3.114/3.206/3.302/0.100 ms\n# ping -c 3 -6 google.com\nconnect: Network is unreachable\n</code></pre> <ul> <li>IPv6\u306eping\u304c\u758e\u901a\u3057\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_13","title":"IPv6\u3092\u518d\u6709\u52b9\u5316\u3057\u307e\u3059","text":"<pre><code># nmcli c mod enp1s0f0 ipv6.method auto\n# systemctl restart NetworkManager\n</code></pre> <ul> <li>IPv6\u306e\u30a2\u30c9\u30ec\u30b9\u306e\u53d6\u5f97/\u8a2d\u5b9a\u65b9\u6cd5\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4e0a\u4f8b\u306f\u300c\u81ea\u52d5\u8a2d\u5b9a\u300d\u3067\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_14","title":"\u518d\u6709\u52b9\u5316\u5f8c\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ifconfig enp1s0f0\nenp1s0f0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.123  netmask 255.255.255.0  broadcast 192.168.1.255\n        inet6 fe80::a236:9fff:fe8e:41b4  prefixlen 64  scopeid 0x20&lt;link&gt;\n        inet6 240d:1a:b86:e800:a236:9fff:fe8e:41b4  prefixlen 64  scopeid 0x0&lt;global&gt;\n        ether a0:36:9f:8e:41:b4  txqueuelen 1000  (Ethernet)\n        RX packets 1499728  bytes 1571232879 (1.4 GiB)\n        RX errors 0  dropped 21  overruns 0  frame 0\n        TX packets 575824  bytes 193334401 (184.3 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n        device memory 0xdf100000-df1fffff\n</code></pre> <ul> <li>inet6\u306e\u30a2\u30c9\u30ec\u30b9\u60c5\u5831\u304c\u518d\u8a2d\u5b9a\u3055\u308c\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_15","title":"\u518d\u6709\u52b9\u5316\u5f8c\u306eIPv6\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ping -c 3 -4 google.com\nPING google.com (142.250.198.14) 56(84) bytes of data.\n64 bytes from nrt12s58-in-f14.1e100.net (142.250.198.14): icmp_seq=1 ttl=117 time=3.15 ms\n64 bytes from nrt12s58-in-f14.1e100.net (142.250.198.14): icmp_seq=2 ttl=117 time=3.26 ms\n64 bytes from nrt12s58-in-f14.1e100.net (142.250.198.14): icmp_seq=3 ttl=117 time=3.11 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2002ms\nrtt min/avg/max/mdev = 3.106/3.170/3.256/0.078 ms\n# ping -c 3 -6 google.com\nPING google.com(nrt12s36-in-x0e.1e100.net (2404:6800:4004:822::200e)) 56 data bytes\n64 bytes from nrt12s36-in-x0e.1e100.net (2404:6800:4004:822::200e): icmp_seq=1 ttl=58 time=4.50 ms\n64 bytes from nrt12s36-in-x0e.1e100.net (2404:6800:4004:822::200e): icmp_seq=2 ttl=58 time=3.70 ms\n64 bytes from nrt12s36-in-x0e.1e100.net (2404:6800:4004:822::200e): icmp_seq=3 ttl=58 time=3.59 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2003ms\nrtt min/avg/max/mdev = 3.589/3.929/4.500/0.406 ms\n</code></pre> <ul> <li>IPv4\u3001IPv6\u3068\u3082\u306bping\u304c\u5c4a\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#c3-ubuntu22ipv6","title":"C.3 Ubuntu22\u3067\u3001IPv6\u3092\u7121\u52b9\u5316/\u518d\u6709\u52b9\u5316\u3059\u308b","text":"<ul> <li>enps03\u304c\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u629c\u3051\u3066\u3044\u3051\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u3059</li> </ul>"},{"location":"linux/ipv6-setting/#networkmanager","title":"NetworkManager\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059","text":"<ul> <li>Ubuntu\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fNetworkManager\u74b0\u5883\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u306a\u3044\u306e\u3067\u3001\u8a2d\u5b9a\u3057\u307e\u3059\u3002</li> </ul> <pre><code># apt install network-manager\n# systemctl status NetworkManager\n\u25cf NetworkManager.service - Network Manager\n     Loaded: loaded (/lib/systemd/system/NetworkManager.service; enabled; vendor preset: enabled)\n     Active: active (running) since Fri 2023-09-08 06:07:06 UTC; 19s ago\n       Docs: man:NetworkManager(8)\n   Main PID: 1780 (NetworkManager)\n      Tasks: 3 (limit: 40062)\n     Memory: 3.1M\n        CPU: 44ms\n     CGroup: /system.slice/NetworkManager.service\n             \u2514\u25001780 /usr/sbin/NetworkManager --no-daemon\n\uff08\u4ee5\u4e0b\u7701\u7565\uff09\n</code></pre> <ul> <li>/etc/netplan/00-installer-config.yaml\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002</li> <li><code>version: 2</code>\u3068<code>renderer: NetworkManager</code>\u306e\u884c\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002</li> </ul> <pre><code># This is the network config written by 'subiquity'\nnetwork:\n  version: 2\n  renderer: NetworkManager\n</code></pre> <ul> <li>\u7de8\u96c6\u5f8c\u30ea\u30d6\u30fc\u30c8\u3057\u3066\u3001nmcli\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002</li> </ul> <pre><code># nmcli c show\nNAME            UUID                                  TYPE      DEVICE\nnetplan-enp0s3  1eef7e45-3b9d-3043-bee3-fc5925c90273  ethernet  enp0s3\n</code></pre>"},{"location":"linux/ipv6-setting/#ipv6_16","title":"\u73fe\u5728\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># cat /etc/lsb-release\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=22.04\nDISTRIB_CODENAME=jammy\nDISTRIB_DESCRIPTION=\"Ubuntu 22.04.3 LTS\"\n\n# ifconfig enp0s3\nenp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.42  netmask 255.255.255.0  broadcast 192.168.1.255\n        inet6 fe80::a00:27ff:fe6d:1c43  prefixlen 64  scopeid 0x20&lt;link&gt;\n        inet6 240d:1a:b86:e800:a00:27ff:fe6d:1c43  prefixlen 64  scopeid 0x0&lt;global&gt;\n        ether 08:00:27:6d:1c:43  txqueuelen 1000  (Ethernet)\n        RX packets 510  bytes 317588 (317.5 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 287  bytes 33136 (33.1 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n\n# route -n\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\n0.0.0.0         192.168.1.1     0.0.0.0         UG    0      0        0 enp0s3\n192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 enp0s3\n\uff08\u95a2\u4fc2\u90e8\u5206\u306e\u307f\u629c\u7c8b\uff09\n</code></pre> <ul> <li>inet\u306b\u3082\u3001inet6\u306b\u3082\u30a2\u30c9\u30ec\u30b9\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_17","title":"\u73fe\u5728\u306eIPv6\u8a2d\u5b9a\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># apt-get install iputils-ping net-tools\n# ping -c 3 -4 google.com\nPING  (142.250.196.110) 56(84) bytes of data.\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=1 ttl=117 time=4.69 ms\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=2 ttl=117 time=4.22 ms\n64 bytes from nrt12s35-in-f14.1e100.net (142.250.196.110): icmp_seq=3 ttl=117 time=4.10 ms\n\n---  ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2002ms\nrtt min/avg/max/mdev = 4.101/4.336/4.691/0.255 ms\n# ping -c 3 -6 google.com\nPING google.com(nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e)) 56 data bytes\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=1 ttl=117 time=3.85 ms\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=2 ttl=117 time=4.26 ms\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=3 ttl=117 time=4.14 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2004ms\nrtt min/avg/max/mdev = 3.847/4.082/4.255/0.172 ms\n</code></pre> <ul> <li>ping\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u306a\u3044\u5834\u5408\u306f\u3001<code>iputils-ping</code> <code>net-tools</code>\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002</li> <li>IPv4\u3001IPv6\u3068\u3082\u306bping\u304c\u5c4a\u304d\u307e\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_18","title":"IPv6\u3092\u7121\u52b9\u5316\u3057\u307e\u3059","text":"<pre><code># nmcli c mod netplan-enp0s3 ipv6.method disable\n# systemctl restart NetworkManager\n</code></pre>"},{"location":"linux/ipv6-setting/#ipv6_19","title":"\u7121\u52b9\u5316\u5f8c\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ifconfig enp0s3\nenp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.42  netmask 255.255.255.0  broadcast 192.168.1.255\n        ether 08:00:27:6d:1c:43  txqueuelen 1000  (Ethernet)\n        RX packets 308  bytes 29193 (29.1 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 168  bytes 20875 (20.8 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <ul> <li>inet6\u306e\u8a2d\u5b9a\u304c\u524a\u9664\u3055\u308c\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_20","title":"\u7121\u52b9\u5316\u5f8c\u306eIPv6\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ping -c 3 -4 google.com\nPING google.com (142.250.198.14) 56(84) bytes of data.\n64 bytes from nrt12s58-in-f14.1e100.net (142.250.198.14): icmp_seq=1 ttl=117 time=3.85 ms\n64 bytes from nrt12s58-in-f14.1e100.net (142.250.198.14): icmp_seq=2 ttl=117 time=4.13 ms\n64 bytes from nrt12s58-in-f14.1e100.net (142.250.198.14): icmp_seq=3 ttl=117 time=3.98 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2004ms\nrtt min/avg/max/mdev = 3.854/3.988/4.132/0.113 ms\n# ping -c 3 -6 google.com\nping: connect: Network is unreachable\n</code></pre> <ul> <li>IPv6\u306eping\u304c\u758e\u901a\u3057\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_21","title":"IPv6\u3092\u518d\u6709\u52b9\u5316\u3057\u307e\u3059","text":"<pre><code># nmcli c mod netplan-enp0s3 ipv6.method auto\n# systemctl restart NetworkManager\n</code></pre> <ul> <li>IPv6\u306e\u30a2\u30c9\u30ec\u30b9\u306e\u53d6\u5f97/\u8a2d\u5b9a\u65b9\u6cd5\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4e0a\u4f8b\u306f\u300c\u81ea\u52d5\u8a2d\u5b9a\u300d\u3067\u3059\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_22","title":"\u518d\u6709\u52b9\u5316\u5f8c\u306eIPv6\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ifconfig enp0s3\nenp0s3: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500\n        inet 192.168.1.42  netmask 255.255.255.0  broadcast 192.168.1.255\n        inet6 fe80::a00:27ff:fe6d:1c43  prefixlen 64  scopeid 0x20&lt;link&gt;\n        inet6 240d:1a:b86:e800:9e67:bc57:fffe:ccc3  prefixlen 64  scopeid 0x0&lt;global&gt;\n        inet6 240d:1a:b86:e800:a00:27ff:fe6d:1c43  prefixlen 64  scopeid 0x0&lt;global&gt;\n        ether 08:00:27:6d:1c:43  txqueuelen 1000  (Ethernet)\n        RX packets 458  bytes 41510 (41.5 KB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 263  bytes 32191 (32.1 KB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n</code></pre> <ul> <li>inet6\u306e\u30a2\u30c9\u30ec\u30b9\u60c5\u5831\u304c\u518d\u8a2d\u5b9a\u3055\u308c\u307e\u3057\u305f\u3002</li> </ul>"},{"location":"linux/ipv6-setting/#ipv6_23","title":"\u518d\u6709\u52b9\u5316\u5f8c\u306eIPv6\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u307e\u3059","text":"<pre><code># ping -c 3 -4 google.com\nPING  (142.250.196.142) 56(84) bytes of data.\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=1 ttl=117 time=3.62 ms\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=2 ttl=117 time=4.37 ms\n64 bytes from nrt12s36-in-f14.1e100.net (142.250.196.142): icmp_seq=3 ttl=117 time=4.06 ms\n\n---  ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2006ms\nrtt min/avg/max/mdev = 3.624/4.015/4.366/0.304 ms\n# ping -c 3 -6 google.com\nPING google.com(nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e)) 56 data bytes\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=1 ttl=117 time=5.23 ms\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=2 ttl=117 time=4.07 ms\n64 bytes from nrt12s35-in-x0e.1e100.net (2404:6800:4004:821::200e): icmp_seq=3 ttl=117 time=4.35 ms\n\n--- google.com ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2004ms\nrtt min/avg/max/mdev = 4.074/4.551/5.225/0.490 ms\n</code></pre> <ul> <li>IPv4\u3001IPv6\u3068\u3082\u306bping\u304c\u5c4a\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002</li> </ul> <p>\u4ee5\u4e0a</p>"},{"location":"misc/real/","title":"Real","text":""},{"location":"misc/real/#real-programmers","title":"Real Programmers","text":"<ul> <li>do List Processing in C.</li> <li>do String Manipulation in C.</li> <li>do Accounting (if they do it at all) in C.</li> <li>do Artificial Intelligence programs in C.</li> <li>see also [1]</li> </ul>"},{"location":"misc/real/#references","title":"References","text":"<ol> <li>Real Programmers Don't Use PASCAL</li> </ol>"},{"location":"oai5g/oai5g-ubu22/","title":"Oai5g ubu22","text":"<p>2023/9/5 \u7de8\u96c6\u4e2d</p>"},{"location":"oai5g/oai5g-ubu22/#a","title":"A. \u306f\u3058\u3081\u306b","text":"<p>OpenAirInterface5G\u3067\u958b\u767a\u3055\u308c\u305f\u30015G\u306eContainer Network Function (CNF)\u4e00\u5f0f\u3092Ubuntu22\u306eDocker\u74b0\u5883\u3067\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002\u305d\u306e\u30d3\u30eb\u30c9\u624b\u9806\u3068\u8d77\u52d5\u624b\u9806\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <p></p> <ul> <li>CNF\u9593\u306e\u901a\u4fe1\u5185\u5bb9\uff08N1\u3001N2\u3001SBI\u3001N3\u3001N4\u3001N6\uff09\u304cWireShark\u3067\u89b3\u5bdf\u3067\u304d\u307e\u3059\u3002\u73fe\u72b6\u3001\u30b3\u30f3\u30c6\u30ca\u9593\u901a\u4fe1\u306f\uff12\u3064\u306e\u30d6\u30ea\u30c3\u30b8(L2SW)\u306b\u96c6\u7d04\u3055\u308c\u3066\u3044\u307e\u3059\uff08\u4eca\u5f8c\u3001\u53c2\u7167\u70b9\u5225\u306b\u5206\u96e2\u3057\u305f\u3044\uff09\u3002\u898b\u306b\u304f\u3044\u5834\u5408\u306f\u3001WireShark\u306e\u30d5\u30a3\u30eb\u30bf\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002</li> <li>NR-UE\u30b3\u30f3\u30c6\u30ca\u306e\u30b7\u30a7\u30eb\u304b\u3089\u3001gNB\u3001UPF\u3001DN\u3092\u7d4c\u7531\u3057\u3066\u5b9f\u969b\u306e\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3067\u304d\u307e\u3059\uff08<code>ping 8.8.8.8</code>\u306a\u3069\u304c\u758e\u901a\u3067\u304d\u307e\u3059\uff09\u3002</li> <li>NR-UE\u3068DN\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u306fiperf\u304c\u7d44\u307f\u8fbc\u3093\u3067\u3042\u308a\u3001U\u30d7\u30ec\u30fc\u30f3\uff08NR-UE\u2500gNB\u2500UPF\u2500DN\uff09\u306e\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u6027\u80fd\u3092\u8a08\u6e2c\u3067\u304d\u307e\u3059\u3002</li> <li>\u8907\u6570\u306eNR-UE\u3092\u540c\u6642\u8d77\u52d5\u3067\u304d\u307e\u3059\u3002</li> <li>\u300cUbuntu18\u306e\u307f\u3067\u52d5\u4f5c\u3059\u308b\u300d\u3068\u672c\u5bb6\u30b5\u30a4\u30c8\u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u304c\u3001Ubuntu22\u3067\u3082\u52d5\u3044\u305f\u306e\u3067\u3053\u3061\u3089\u3067\u89e3\u8aac\u3057\u307e\u3059\u3002\u8abf\u5b50\u826f\u304f\u306a\u3044\u5834\u5408\u306f\u3001Ubuntu18\u3092\u304a\u8a66\u3057\u4e0b\u3055\u3044\u3002\u30a4\u30f3\u30c6\u30ebCPU\u7528\u306e\u30de\u30a4\u30af\u30ed\u30b3\u30fc\u30c9\u3092\u5145\u3066\u308b\u7b49\u3001\u52d5\u4f5c\u74b0\u5883\u304c\u9650\u5b9a\u3055\u308c\u3066\u3044\u308b(?)\u3088\u3046\u3067\u3059\u3002</li> </ul> <p></p>"},{"location":"oai5g/oai5g-ubu22/#cnf","title":"CNF\u4e00\u89a7","text":"CNF \u5f79\u5272 \u53c2\u7167\u70b9(\u30d7\u30ed\u30c8\u30b3\u30eb) \u5099\u8003 oai-nr-ue NR-UE N1(NAS) iperf\u5b9f\u88c5 oai-gnb gNB N1, N2(NGAP), N3(GTPU) CU/DU\u306b\u5206\u96e2\u53ef\u80fd oai-amf AMF N2, N12(SQL/TCP), N11(SBI) mysql AUSF/UDM N12 oai-nrf NRF (SBI) oai-smf SMF N11, N4(PFCP) oai-spgwu UPF N3, N4, N6(IP) PGW-U\u3092\u62e1\u5f35\u3057\u305f\u3082\u306e oai-ext-dn DN N6 iperf\u5b9f\u88c5"},{"location":"oai5g/oai5g-ubu22/#l2sw","title":"\u30d6\u30ea\u30c3\u30b8(L2SW)\u4e00\u89a7","text":"\u30d6\u30ea\u30c3\u30b8\u540d \u53ce\u5bb9\u53c2\u7167\u70b9 public_net N1, N2, N3, N12, N11, N4 traffic_net N6"},{"location":"oai5g/oai5g-ubu22/#b","title":"B. \u30d3\u30eb\u30c9\u624b\u9806\u3068\u8d77\u52d5\u624b\u9806","text":""},{"location":"oai5g/oai5g-ubu22/#b1-openairinterface5g","title":"B.1 OpenAirInterface5G\u304b\u3089\u3001\u30b3\u30f3\u30d5\u30a3\u30ae\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3059","text":""},{"location":"oai5g/oai5g-ubu22/#b2-ubuntu22dockerdocker-compose","title":"B.2 Ubuntu22\u3067Docker\u74b0\u5883\u3068Docker Compose\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059","text":""},{"location":"oai5g/oai5g-ubu22/#b3-dockerhubcnf","title":"B.3 DockerHub\u304b\u3089\u3001CNF\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059","text":""},{"location":"oai5g/oai5g-ubu22/#b4-docker-composenr-ue","title":"B.4 Docker Compose\u3067NR-UE\u4ee5\u5916\u3092\u30d3\u30eb\u30c9\uff06\u8d77\u52d5\u3057\u307e\u3059","text":""},{"location":"oai5g/oai5g-ubu22/#b5-docker-composenr-ue","title":"B.5 Docker Compose\u3067NR-UE\u3092\u30d3\u30eb\u30c9\uff06\u8d77\u52d5\u3057\u307e\u3059","text":""},{"location":"oai5g/oai5g-ubu22/#b6-nr-ue","title":"B.6 NR-UE\u30b3\u30f3\u30c6\u30ca\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059","text":""},{"location":"oai5g/oai5g-ubu22/#b7-dn","title":"B.7 DN\u30b3\u30f3\u30c6\u30ca\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059","text":""},{"location":"oai5g/oai5g-ubu22/#c","title":"C. \u30b3\u30f3\u30c6\u30ca\u9593\u901a\u4fe1\u306e\u89b3\u5bdf","text":""},{"location":"oai5g/oai5g-ubu22/#d","title":"D. \u4eca\u5f8c","text":""},{"location":"sipp/sipp-install/","title":"Sipp install","text":"<p>2023/9/9\u66f4\u65b0</p>"},{"location":"sipp/sipp-install/#oai5gnr-ue2uacuas","title":"OAI5G\u3067NR-UE\u30922\u53f0\u8d77\u52d5\u3057\u3001UAC\u3068UAS\u3092\u8d70\u3089\u305b\u305f\u3044","text":"<ul> <li> <p>RTP\u3082\u98db\u3070\u305b\u308b\u304c\u3001\u30e2\u30d0\u30a4\u30eb\u306ecodec\u3067\u306f\u306a\u3044\u3002\u30e2\u30d0\u30a4\u30eb\u306ecodec\u306epcap\u3092\u3042\u3068\u3067\u63a2\u3057\u3066\u307f\u308b\u3010TODO\u3011\u3002</p> </li> <li> <p>IMS\u306e\u30b7\u30ca\u30ea\u30aa\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u524d\u4f5c\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u3001\u9069\u7528\u3057\u3066\u307f\u308b\u3010TODO\u3011\u3002</p> </li> </ul> <pre><code># cd /home\n# wget https://github.com/SIPp/sipp/archive/refs/tags/v3.7.1.tar.gz\n# tar xzvf v3.7.1.tar.gz\n# cd sipp-3.7.1/\n# apt install cmake g++\n# apt install libncurses5 libncurses5-dev\n# vi include/version.h\n</code></pre> <p><code>include/version.h</code>\u306e1\u884c\u76ee\u30682\u884c\u76ee\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b</p> <pre><code>#define SIPP_VERSION \"v3.7.1\"\n#if 0 /* set to 0 to bypass the \"#error\" below */\n</code></pre> <p>make\u3059\u308b</p> <pre><code># cmake .\n# make\n# make install\nConsolidate compiler generated dependencies of target sipp\n[100%] Built target sipp\nInstall the project...\n-- Install configuration: \"\"\n-- Installing: /usr/local/bin/sipp\n-- Set runtime path of \"/usr/local/bin/sipp\" to \"\"\n# which sipp\n/usr/local/bin/sipp\n# sipp -v\n SIPp v3.7.1.\n\uff08\u4ee5\u4e0b\u7701\u7565\uff09\n</code></pre>"},{"location":"sipp/windows-sipp/","title":"Windows sipp","text":"<p>2023/9/9\u66f4\u65b0</p>"},{"location":"sipp/windows-sipp/#windows-10sipp-361","title":"Windows 10\u3067SIPp 3.6.1\u3092\u52d5\u304b\u3059","text":"<p>\u300cmake\u3067\u304d\u305f\u300d\u3053\u3068\u3060\u3051\u5831\u544a\u3057\u307e\u3059\u3002make\u65b9\u6cd5\u306f\u5225\u9014\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002</p> <pre><code>C:\\Users\\SMorifuku&gt;sipp -v\n\n SIPp v3.6.1-RTPSTREAM.\n\n This program is free software; you can redistribute it and/or\n modify it under the terms of the GNU General Public License as\n published by the Free Software Foundation; either version 2 of\n the License, or (at your option) any later version.\n\n This program is distributed in the hope that it will be useful,\n but WITHOUT ANY WARRANTY; without even the implied warranty of\n MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n GNU General Public License for more details.\n\n You should have received a copy of the GNU General Public\n License along with this program; if not, write to the\n Free Software Foundation, Inc.,\n 59 Temple Place, Suite 330, Boston, MA  02111-1307 USA\n\n Author: see source files.\n</code></pre>"},{"location":"sipp/windows-sipp/#_1","title":"\u7d4c\u7def","text":"<ul> <li>Windows\u4e0a\u3067\u52d5\u304fsip-server\u3092\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u30e1\u30a4\u30af\u3057\u307e\u3057\u305f\u3002</li> <li>\u306a\u3093\u3068\u3059\u3093\u306a\u308amake\u3067\u304d\u307e\u3057\u305f\u3002</li> <li>Windows 10\u306eCygwin64\u74b0\u5883\u3067make\u3057\u3066\u3044\u307e\u3059\u3002</li> </ul>"},{"location":"tool/iperf3/","title":"Iperf3","text":""},{"location":"tool/iperf3/#ipv6-iperf3-trial","title":"IPv6 iperf3 Trial","text":"<p>A simple IPv6 traffic test by using iperf3 without IPv6 NDP procedure. Real Programmers use iperf3 for the initial trial then make the REAL traffic generator by themselves.</p>"},{"location":"tool/iperf3/#client","title":"Client","text":"<p>Send packets from Client (2001:2::14) to Server (2001:3::19) via Gateway-Front (2001:2::12)</p> <pre><code>nmcli c mod eth0 ipv6.address 2001:2::14/64\nnmcli c down eth0\nnmcli c up eth0\nip -6 neigh add 2001:2::12 lladdr a0:36:9f:a3:5b:fe dev eth0\nroute add -A inet6 2001:3::19 gw 2001:2::12\niperf3 -u -c 2001:3::19 -b 900M\n</code></pre>"},{"location":"tool/iperf3/#gateway","title":"Gateway","text":"<p>IP forward between Front (2001:2::12) and Rear (2001:3::12)</p> <pre><code>nmcli c mod enp1s0f0 ipv6.address 2001:2::12/64\nnmcli c mod enp1s0f1 ipv6.address 2001:3::12/64\nnmcli c down enp1s0f0 enp1s0f1\nnmcli c up enp1s0f0\nnmcli c up enp1s0f1\necho 1 &gt; /proc/sys/net/ipv6/conf/all/forwarding\n</code></pre>"},{"location":"tool/iperf3/#server","title":"Server","text":"<p>Receive packets from Client (2001:2::14) to Server (2001:3::19) via Gateway-Rear (2001:3::12)</p> <pre><code>nmcli c mod enp1s0f1 ipv6.address 2001:3::19/64\nnmcli c down enp1s0f1\nnmcli c up enp1s0f1\nip -6 neigh add 2001:3::12 lladdr a0:36:9f:a3:5b:ff dev enp1s0f1\nroute add -A inet6 2001:2::14 gw 2001:3::12\niperf3 -s\n\n</code></pre>"},{"location":"virtualization/","title":"Index","text":"<p>2023/9/5\u66f4\u65b0</p> <p>\u300cB. Virtualization\u7de8\u300d\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u4eee\u60f3\u5316\u6280\u8853\u306b\u3064\u3044\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u3001\u8a2d\u5b9a\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002</p> <ul> <li>VirtualBox\u3010B-1\u3011</li> <li>VMware\u3010B-2\u3011</li> <li>KVM\u3010B-3\u3011</li> <li>RHV\u3010B-4\u3011</li> <li>Docker\u3010B-5\u3011</li> <li>Kubernetes\u3010B-6\u3011</li> <li>OpenShift\u3010B-7\u3011</li> </ul> <p>\u4ee5\u4e0b\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u4eee\u60f3\u5316\u30a4\u30f3\u30d5\u30e9</p> <ul> <li>GCP\u3010B-11\u3011</li> <li>Azure\u3010B-12\u3011</li> </ul> <p>\u4ee5\u4e0b\u306e\u4eee\u60f3\u5316\u90e8\u54c1</p> <ul> <li>Open vSwitch\u3010B-21\u3011</li> </ul>"}]}